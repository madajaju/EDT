<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Dynamischer Seitentitel -->
    <title>Der AWS-Ausfall im November 2020 | Embracing Digital Transformation</title>

    <!-- SEO -->
    <link rel="canonical" href="https://www.embracingdigital.org/de/episodes/edt-33/index.html">
    <meta name="description" content="Darren Pulsipher, Chief Solution Architect, Public Sector, bei Intel spricht über die aus dem AWS-Ausfall im November 2020 gewonnenen Erkenntnisse und vorbeugende Lösungen zur Bewältigung solcher Ausfälle.">
    <meta name="keywords" content="Digitale Transformation, Podcast, Interviews, Nachrichten, KI, Cybersicherheit, Edge Computing, Datenmanagement">
    <meta name="author" content="Dr. Darren W. Pulsipher">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Der AWS-Ausfall im November 2020 | Embracing Digital Transformation — Interviews, Nachrichten und Community">
    <meta property="og:description" content="Darren Pulsipher, Chief Solution Architect, Public Sector, bei Intel spricht über die aus dem AWS-Ausfall im November 2020 gewonnenen Erkenntnisse und vorbeugende Lösungen zur Bewältigung solcher Ausfälle.">
    <meta property="og:url" content="https://www.embracingdigital.org/de/episodes/edt-33/index.html">
    <meta property="og:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Der AWS-Ausfall im November 2020 | Embracing Digital Transformation — Interviews, Nachrichten und Community">
    <meta name="twitter:description" content="Darren Pulsipher, Chief Solution Architect, Public Sector, bei Intel spricht über die aus dem AWS-Ausfall im November 2020 gewonnenen Erkenntnisse und vorbeugende Lösungen zur Bewältigung solcher Ausfälle.">
    <meta name="twitter:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Hreflang (Alternativen) -->
    <link rel="alternate" href="https://embracingdigital.org/de/home/" hreflang="de">
    <link rel="alternate" href="https://embracingdigital.org/fr/home/" hreflang="fr">
    <link rel="alternate" href="https://embracingdigital.org/it/home/" hreflang="it">
    <link rel="alternate" href="https://embracingdigital.org/pt/home/" hreflang="pt">
    <link rel="alternate" href="https://embracingdigital.org/ar/home/" hreflang="ar">
    <link rel="alternate" href="https://embracingdigital.org/ja/home/" hreflang="ja">
    <link rel="alternate" href="https://embracingdigital.org/en/home/" hreflang="en">
    <link rel="alternate" href="https://embracingdigital.org/de/home/" hreflang="x-default">

    <!-- Favicon & Styles -->
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/styles.css">

    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P4XHVE79DL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P4XHVE79DL');
    </script>

    <!-- Schema.org: Organization + WebSite -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Digitale Transformation gestalten",
            "url": "https://embracingdigital.org/",
            "logo": "https://embracingdigital.org/images/logo.png",
            "sameAs": [
                "https://www.youtube.com/@embracingdigital",
                "https://www.linkedin.com/company/embracing-digital-transformation"
            ]
        }
    </script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Digitale Transformation gestalten",
            "url": "https://embracingdigital.org/",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://embracingdigital.org/de/search.html?query={query}",
                "query-input": "required name=query"
            }
        }
    </script>
</head>
<body>

<header role="banner">
    <!-- Logo -->
    <div class="logo-container">
        <a href="/de/home/" aria-label="Startseite — Digitale Transformation gestalten">
            <img src="/images/logo.png" alt="Logo — Digitale Transformation gestalten" class="site-icon">
        </a>
    </div>

    <!-- Mobile Navigation -->
    <button class="menu-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Menü umschalten">☰</button>

    <!-- Hauptnavigation -->
    <nav id="primary-nav" aria-label="Hauptnavigation">
        <ul>
            <li><a href="/de/home/index.html" >Start</a></li>

            <li class="dropdown">
                <a href="/de/shows/index.html" aria-haspopup="true" aria-expanded="false">Sendungen</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none">
                        <a role="menuitem" href="/de/episodes/index.html" aria-label="Interviews — Digitale Transformation gestalten">
                            Digitale Transformation gestalten
                            <small class="nav-note">Interviews</small>
                        </a>
                    </li>
                    <li role="none">
                        <a role="menuitem" href="/de/briefs/index.html" aria-label="Nachrichten — Digital diese Woche">
                            Digital diese Woche
                            <small class="nav-note">Nachrichten</small>
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="/de/guests/index.html">Gäste</a></li>
            <li><a href="/de/articles/index.html">Artikel</a></li>

            <!-- Community -->
            <li class="dropdown">
                <a href="/de/community.html" aria-haspopup="true" aria-expanded="false">Community</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/de/newsletter.html">Newsletter</a></li>
                    <li role="none"><a role="menuitem" href="https://www.patreon.com/embracingdigital" target="_blank" rel="noopener">Patreon</a></li>
                    <li role="none"><a role="menuitem" href="https://www.linkedin.com/company/embracing-digital-transformation" target="_blank" rel="noopener">LinkedIn Gruppe</a></li>
                </ul>
            </li>

            <li><a href="https://6704f0-2.myshopify.com/" target="_blank" rel="noopener">Shop</a></li>

            <!-- Über uns -->
            <li class="dropdown">
                <a href="/de/about.html" aria-haspopup="true" aria-expanded="false">Über uns</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/de/about.html">Über die Sendung</a></li>
                    <li role="none"><a role="menuitem" href="/de/host.html">Moderator: Dr. Darren Pulsipher</a></li>
                    <li role="none"><a role="menuitem" href="/de/sponsors/index.html">Sponsoring & Kontakt</a></li>
                </ul>
            </li>

            <li><a href="/de/search.html">Suche</a></li>

            <!-- Sprachen -->
            <li class="dropdown">
                <a href="#" aria-haspopup="true" aria-expanded="false">Sprachen</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/ar/home/index.html">العربية</a></li>
                    <li role="none"><a role="menuitem" href="/de/home/index.html">Deutsch</a></li>
                    <li role="none"><a role="menuitem" href="/en/home/index.html">English</a></li>
                    <li role="none"><a role="menuitem" href="/fr/home/index.html">Français</a></li>
                    <li role="none"><a role="menuitem" href="/it/home/index.html">Italiano</a></li>
                    <li role="none"><a role="menuitem" href="/pt/home/index.html">Português</a></li>
                    <li role="none"><a role="menuitem" href="/ja/home/index.html">日本語</a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header>



<a class="skip-link" href="#main">Skip to content</a>

<nav class="breadcrumbs" aria-label="Breadcrumb">
    <ol>
        <li><a href="../../../de/home/index.html">Home</a></li>
        <li><a href="../../../de/episodes/index.html">Episodes</a></li>
        <li aria-current="page">Episode 33: The AWS Outage of Nov 2020</li>
    </ol>
</nav>

<main id="main" role="main">
    <article class="episode-container" itemscope itemtype="https://schema.org/PodcastEpisode">

        <header id="one-episode">
            
                <link itemprop="url" href="https://www.embracingdigital.org/de/episodes/edt-33/index.html">
                <meta itemprop="mainEntityOfPage" content="https://www.embracingdigital.org/de/episodes/edt-33/index.html"/>
            

            <h1 id="episode-title" itemprop="name">
                <span class="episode-number">Episode 33</span>
                <span class="episode-title">The AWS Outage of Nov 2020</span>
            </h1>

            <p class="episode-meta">
                
                    <time datetime="2020-12-15" itemprop="datePublished">2020-12-15T00:00:00.000Z</time>
                
                <span itemprop="author" itemscope itemtype="https://schema.org/Person">
          <meta itemprop="name" content="Dr. Darren Pulsipher">
          Hosted by <span class="host-name">Dr. Darren Pulsipher</span>
        </span>
            </p>

            <meta itemprop="episodeNumber" content="33"/>
            <meta itemprop="inLanguage" content="de"/>
        </header>

        
            <section class="video-container" aria-label="Watch the episode"
                     itemprop="associatedMedia" itemscope itemtype="https://schema.org/VideoObject">
                <meta itemprop="name" content="Der AWS-Ausfall im November 2020 Video">
                <meta itemprop="embedUrl" content="https://www.youtube.com/embed/XquYoUXxJks">
                <iframe
                        width="auto"
                        height="auto"
                        src="https://www.youtube.com/embed/XquYoUXxJks"
                        title="Der AWS-Ausfall im November 2020 Video"
                        loading="lazy"
                        referrerpolicy="strict-origin-when-cross-origin"
                        allowfullscreen
                ></iframe>
            </section>
        

        
            <section class="podcast-container" aria-label="Listen to this episode"
                     itemprop="associatedMedia" itemscope itemtype="https://schema.org/AudioObject">
                <meta itemprop="name" content="Der AWS-Ausfall im November 2020 Audio">
                <meta itemprop="contentUrl" content="https://share.transistor.fm/e/e81503fc">
                <iframe
                        width="100%"
                        height="180"
                        frameborder="0"
                        scrolling="no"
                        src="https://share.transistor.fm/e/e81503fc"
                        title="Der AWS-Ausfall im November 2020 Audio"
                        loading="lazy"
                ></iframe>

                <p class="listen-note">
                    Explore more in the <a href="../../../de/episodes/index.html">episode archive</a>.
                </p>
            </section>
        

        <section class="show-summary" aria-label="Episode summary" itemprop="description">
            <h2>Summary</h2>
            <p>Darren Pulsipher, Chief Solution Architect, Public Sector, bei Intel spricht über die aus dem AWS-Ausfall im November 2020 gewonnenen Erkenntnisse und vorbeugende Lösungen zur Bewältigung solcher Ausfälle.</p>


            
                <nav class="tags" aria-label="Tags">
                    
                        <a href="../../../de/search.html?query=aws"
                           itemprop="keywords">aws</a>
                    
                        <a href="../../../de/search.html?query=datamanagement"
                           itemprop="keywords">datamanagement</a>
                    
                        <a href="../../../de/search.html?query=multicloud"
                           itemprop="keywords">multicloud</a>
                    
                        <a href="../../../de/search.html?query=devops"
                           itemprop="keywords">devops</a>
                    
                        <a href="../../../de/search.html?query=microservices"
                           itemprop="keywords">microservices</a>
                    
                        <a href="../../../de/search.html?query=incidentresponse"
                           itemprop="keywords">incidentresponse</a>
                    
                        <a href="../../../de/search.html?query=cybersecurity"
                           itemprop="keywords">cybersecurity</a>
                    
                        <a href="../../../de/search.html?query=process"
                           itemprop="keywords">process</a>
                    
                        <a href="../../../de/search.html?query=technology"
                           itemprop="keywords">technology</a>
                    
                        <a href="../../../de/search.html?query=policy"
                           itemprop="keywords">policy</a>
                    
                        <a href="../../../de/search.html?query=people"
                           itemprop="keywords">people</a>
                    
                </nav>
            

            
                <div class="guests" aria-label="Guests">
                    
                        <span itemprop="actor" itemscope itemtype="https://schema.org/Person">
              <a href="../../../de/guests/darren-w-pulsipher/index.html" itemprop="url">
                <span itemprop="name">Darren W Pulsipher</span>
              </a>
            </span>
                    
                </div>
            
        </section>

        <section class="show-notes" aria-label="Show notes">
            <h2>Was wir aus dem AWS-Ausfall gelernt haben</h2>
<p>Amazon Web Services (AWS) hatte zu einem ungünstigen Zeitpunkt eine erhebliche Störung – am Tag vor Thanksgiving 2020. Da sie ihre Service-Protokolle veröffentlicht haben, ist es interessant, diese zu überprüfen, um herauszufinden, was passiert ist und was wir daraus lernen können.</p>
<h2>Zeitstrahl des AWS-Ausfalls</h2>
<p>Am Mittwoch, den 25. November 2020 gegen 3:00 Uhr PST, aktualisierte AWS die Ost-Region und fügte Server hinzu, um die Kapazität von Kinesis zu erhöhen. Kinesis ist ein beliebter KI-Dienst, der Musterabgleiche in Logdateien und Videodateien durchführt. Etwa anderthalb Stunden nach dem Upgrade begannen die Serveralarme Fehler in den Kinesis-Datensätzen zu melden. Ziemlich schnell, gegen 8 Uhr, identifizierten sie zunächst ein paar Kandidaten in den Front-End-Services als Ursache. Kinesis besteht aus verschiedenen kleineren Diensten, einer Gruppe von Front-End-Services und einer Gruppe von Back-End-Services. Wie das System aufgebaut ist, wird jedes Mal, wenn ein Back-End-Service läuft, ein Thread im Front-End gestartet. Eines der Probleme war, dass das Front-End die Thread-Grenzwerte erreichte, als sie während des Upgrades Server zum Back-End hinzufügten. Sobald sie dieses Problem erkannt hatten, führten sie eine vorübergehende Lösung mit Updates (Patches) für das Betriebssystem durch und Kinesis war gegen ungefähr 10:30 Uhr wieder online und wurde bis 1:15 Uhr am 26. November vollständig wiederhergestellt. Letztendlich war Kinesis 21 Stunden lang nicht voll funktionsfähig und obwohl nicht jeder dieses KI-Tool verwendet, war die Auswirkung weitreichend.</p>
<h2>Kinesis Impact auf Deutsch übersetzen.</h2>
<p>Mehrere andere Amazon-Dienste nutzen Kinesis, wie zum Beispiel Amazon Cognito und CloudWatch, und sie erlitten unterschiedliche Störungen. Cognito war bis etwa 14 Uhr überlastet; CloudWatch war bis etwa 22 Uhr nicht verfügbar. In einem Dominoeffekt waren auch von CloudWatch abhängige Dienste wie Lambda und EventBridge betroffen. Da EventBridge nicht verfügbar war, waren auch die Container-Dienste LCS und LKS betroffen.</p>
<p>Die Stromausfälle traten nur in der Ostregion auf, und AWS hat schnell Kapazitäten in den anderen Regionen hinzugefügt, um zu verhindern, dass Kinesis ähnlich scheitert. Während des Ausfalls stießen Benutzer in der Ostregion jedoch auf ein verwirrendes Problem, da ihre Service-Dashboard und persönlichen Service-Dashboards keine Informationen empfingen und falsche positives anzeigten. Daher untersuchten viele andere IT-Organisationen die Probleme, da sie nicht die richtigen Informationen erhielten. Überraschenderweise hat AWS den Vorfall vollständig offengelegt, sodass es eine großartige Lernerfahrung ist.</p>
<h2>Lektionen gelernt</h2>
<p>Eine der ersten Lektionen ist, dass einfache Eingriffe in die Infrastruktur wie Kapazitätserhöhungen verstanden und geplant werden müssen. Offensichtlich hat AWS die Upgrades nicht einfach spontan vorgenommen, aber sie haben die Auswirkungen nicht vollständig verstanden. Selbst wenn ein Vorgang standardmäßig erscheint, ist es immer eine gute Idee, in einem Testumfeld bis zum Versagen zu laufen, auch wenn es mehr Zeit kostet. Dies ist besonders wichtig bei Diensten, die für andere Kernabhängigkeiten von Bedeutung sind.</p>
<p>Darüber hinaus müssen Service- oder Microservice-Architekturen ihren gesamten Abhängigkeitsbaum verstehen, damit sie bei Störungen Probleme beheben können. Es ist außerdem wichtig, so locker wie möglich an eine Abhängigkeit gekoppelt zu sein und defensives Programmieren in Microservices einzusetzen, um den Dominoeffekt zu vermeiden, der in diesem Fall auftrat.</p>
<p>Ein weiteres Problem, auf das man achten sollte, sind zirkuläre Abhängigkeiten. Wenn in einer Kette von voneinander abhängigen Mikrodiensten einer ausfällt, kann alles zum Stillstand kommen und Ressourcen verbraucht werden, ohne etwas zu erreichen.</p>
<p>Bei der Entwicklung von Mikrodiensten sollten Sie daran denken, dass Sie nicht immer eine Verbindung zu den von Ihnen abhängigen Diensten haben werden. Das Schreiben von Programmen, die im degradierten Zustand ausgeführt werden können oder zumindest anzeigen können, dass ein Dienst nicht funktioniert, kann Zeit und Mühe sparen. Bei diesem Ausfall sollten Sie bedenken, dass die Dashboards grün liefen, obwohl keine neuen Informationen durchkamen.</p>
<h2>Wer hat den Ausfall am besten bewältigt?</h2>
<p>Viele Unternehmen waren von dem AWS-Ausfall betroffen, einschließlich einiger, die zu Amazon selbst gehören. Einige flogen fast unversehrt durch den Ausfall, während andere mehr Schwierigkeiten hatten, sich zu erholen. Diejenigen, die schnell reagieren konnten, hatten eine Multi-Hybrid-Cloud-Strategie, so dass sie alternative Clouds als Backup hatten. Einige nutzten eine andere Region von AWS, während andere Google oder Azure verwendeten, und einige führten es sogar zurück zu ihren eigenen Rechenzentren oder externen Websites. Mindestens wurden auf den Websites Nachrichten angezeigt, dass sie derzeit Probleme haben, anstatt eines 404-Fehlers.</p>
<p>Unternehmen, die nicht einige der spezialisierten Dienste von Amazon nutzten, schnitten ebenfalls besser ab. Zum Beispiel waren die EKS- und ECS-Managed-Container-Angebote sowie Lambda stark betroffen und blieben für eine erhebliche Zeitdauer offline, wodurch diejenigen, die von diesen Diensten abhängig waren, keine Alternativen hatten.</p>
<p>Während des Ausfalls funktionierten die automatischen Skalierungsdienste nicht richtig, daher musste jedes Unternehmen, das zu dieser Zeit viel Verkehr hatte, herausfinden, was los war und manuell die Dienste hochskalieren. Dies war ein größeres Problem als gewöhnlich, da es der Tag vor Thanksgiving war, eine Zeit, in der viele Verbraucher verreisen und online einkaufen. Zum Beispiel blieb Etsy online, aber sie konnten nicht so viel skalieren wie normalerweise, was zu einem Rückgang der Verkäufe führte.</p>
<p>Die Unternehmen, die über eine eigene externe Überwachung verfügten, schnitten auch besser ab. Einige benachrichtigten sogar AWS über die Ausfälle. Sie waren nicht nur von dem Gesundheits-Dashboard von AWS abhängig, sondern hatten ihre eigene Überwachung auf ihren Servern laufen.</p>
<p>Welche Hauptlehre sollten wir daraus ziehen? Organisationen sollten ihre Cloud-Ressourcen genauso wie Versorgungsunternehmen übernehmen. Genauso wie man einen Notstromgenerator für die Elektrizität hat, um den Geschäftsbetrieb bei einem Ausfall aufrechtzuerhalten, sollten Unternehmen dieselben bewährten Praktiken für Cloud-Services nutzen. Das bedeutet, dass es für das Überstehen einer Krise wie dem Ausfall von AWS unerlässlich ist, eine Backup-Cloud zu haben, die einen Betrieb auch bei eingeschränkter Kapazität ermöglicht.</p>
<h2>Ressourcen</h2>
<p><a href="https://aws.amazon.com/message/11201/">https://aws.amazon.com/message/11201/</a> translates to German as: * <a href="https://aws.amazon.com/message/11201/">https://aws.amazon.com/message/11201/</a></p>
<p><a href="https://www.theverge.com/2020/11/25/21719396/amazon-web-services-aws-outage-down-internet">https://www.theverge.com/2020/11/25/21719396/amazon-web-services-aws-outage-down-internet</a></p>
<ul>
<li>Amazon Web Services (AWS) Ausfall beeinträchtigt das Internet</li>
</ul>
<p><a href="https://www.zdnet.com/article/amazon-heres-what-caused-major-aws-outage-last-week-apologies">https://www.zdnet.com/article/amazon-heres-what-caused-major-aws-outage-last-week-apologies</a> can be translated to German as follows: </p>
<ul>
<li><a href="https://www.zdnet.com/article/amazon-hier-ist-was-den-gro%C3%9Fen-aws-ausfall-in-der-letzten-woche-verursacht-hat-entschuldigungen">https://www.zdnet.com/article/amazon-hier-ist-was-den-großen-aws-ausfall-in-der-letzten-woche-verursacht-hat-entschuldigungen</a></li>
</ul>
<p><a href="https://www.wsj.com/articles/amazon-web-services-hit-by-outage-11606326714">https://www.wsj.com/articles/amazon-web-services-hit-by-outage-11606326714</a></p>
<p>Erklärt: Amazon-Ausfall einfach gemacht</p>

        </section>

        

    </article>
</main>

<!-- Structured Data -->
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "PodcastSeries",
  "@id": "https://www.embracingdigital.org/de/episodes/index.html#series",
  "name": "Embracing Digital Transformation",
  "url": "https://www.embracingdigital.org/de/episodes/index.html",
  "inLanguage": "de",
  "description": "A podcast about the digital transformation of the world.",
  "publisher": {
    "@type": "Organization",
    "@id": "https://www.embracingdigital.org/#org",
    "name": "Embracing Digital Transformation",
    "url": "https://www.embracingdigital.org",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.embracingdigital.org/images/logo.png",
      "width": 512,
      "height": 512
    }
  }
}</script>
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "PodcastEpisode",
  "@id": "https://www.embracingdigital.org/de/episodes/edt-33/index.html#episode",
  "url": "https://www.embracingdigital.org/de/episodes/edt-33/index.html",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.embracingdigital.org/de/episodes/edt-33/index.html"
  },
  "name": "Der AWS-Ausfall im November 2020",
  "episodeNumber": 33,
  "datePublished": "2020-12-15",
  "inLanguage": "de",
  "description": "Darren Pulsipher, Chief Solution Architect, Public Sector, bei Intel spricht über die aus dem AWS-Ausfall im November 2020 gewonnenen Erkenntnisse und vorbeugende Lösungen zur Bewältigung solcher Ausfälle.",
  "partOfSeries": {
    "@id": "https://www.embracingdigital.org/de/episodes/index.html#series"
  },
  "author": {
    "@type": "Person",
    "name": "Dr. Darren Pulsipher"
  },
  "creator": {
    "@type": "Person",
    "name": "Dr. Darren Pulsipher"
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://www.embracingdigital.org/de/episodes/edt-33/thumbnail.png"
  },
  "associatedMedia": [
    {
      "@type": "VideoObject",
      "name": "Der AWS-Ausfall im November 2020 Video",
      "embedUrl": "https://www.youtube.com/embed/XquYoUXxJks"
    },
    {
      "@type": "AudioObject",
      "name": "Der AWS-Ausfall im November 2020 Audio",
      "contentUrl": "https://share.transistor.fm/e/e81503fc"
    }
  ],
  "actor": [
    {
      "@type": "Person",
      "name": "Darren W Pulsipher",
      "url": "https://www.embracingdigital.org/../../../de/guests/darren-w-pulsipher/index.html"
    }
  ]
}</script>

<footer id="footer">
    <div class="footer-content">
        <p>Urheberrecht &copy; 2025 Paidar Productions LLC</p>
        <p>Alle Rechte vorbehalten</p>
    </div>
</footer>
<script>
    // year
    (function(){ var y=document.getElementById('y'); if(y){ y.textContent = new Date().getFullYear(); } })();

    // Guard for pages without nav
    const toggle = document.querySelector('.menu-toggle');
    const nav    = document.querySelector('nav#primary-nav');
    if (nav) {
        // Mobile: toggle .menu-open on <body>
        toggle?.addEventListener('click', () => {
            const open = document.body.classList.toggle('menu-open');
            toggle.setAttribute('aria-expanded', String(open));
        });

        // Dropdowns: tap/click + keyboard
        document.querySelectorAll('li.dropdown > a').forEach(link => {
            const li = link.parentElement;
            const submenu = li.querySelector('.dropdown-menu');

            link.addEventListener('click', (e) => {
                if (!submenu) return;
                e.preventDefault();

                // close others
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    if (a !== link) {
                        a.setAttribute('aria-expanded', 'false');
                        a.parentElement.classList.remove('open');
                    }
                });

                const isOpen = li.classList.toggle('open');
                link.setAttribute('aria-expanded', String(isOpen));
            });

            link.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowDown') { e.preventDefault(); submenu?.querySelector('a')?.focus(); }
                if (e.key === 'Escape')    { li.classList.remove('open'); link.setAttribute('aria-expanded','false'); link.focus(); }
            });
        });

        // Close dropdowns on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('nav')) {
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    a.setAttribute('aria-expanded','false');
                    a.parentElement.classList.remove('open');
                });
            }
        });
    }
</script>

