<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Título de página dinâmico -->
    <title>Os Benefícios dos Bancos de Dados de Gráfico | Embracing Digital Transformation</title>

    <!-- SEO -->
    <link rel="canonical" href="https://www.embracingdigital.org/pt/episodes/edt-97/index.html">
    <meta name="description" content="Darren Pulsipher, Arquiteto Principal de Soluções, Intel, Dr. Hadi Ahmadi, Diretor de Arquitetura de Soluções, Katana Graph discutem os benefícios de bancos de dados de gráficos.">
    <meta name="keywords" content="Transformação digital, podcast, entrevistas, notícias, IA, cibersegurança, edge computing, gestão de dados">
    <meta name="author" content="Dr. Darren W. Pulsipher">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Os Benefícios dos Bancos de Dados de Gráfico | Embracing Digital Transformation — Entrevistas, Notícias e Comunidade">
    <meta property="og:description" content="Darren Pulsipher, Arquiteto Principal de Soluções, Intel, Dr. Hadi Ahmadi, Diretor de Arquitetura de Soluções, Katana Graph discutem os benefícios de bancos de dados de gráficos.">
    <meta property="og:url" content="https://www.embracingdigital.org/pt/episodes/edt-97/index.html">
    <meta property="og:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Os Benefícios dos Bancos de Dados de Gráfico | Embracing Digital Transformation — Entrevistas, Notícias e Comunidade">
    <meta name="twitter:description" content="Darren Pulsipher, Arquiteto Principal de Soluções, Intel, Dr. Hadi Ahmadi, Diretor de Arquitetura de Soluções, Katana Graph discutem os benefícios de bancos de dados de gráficos.">
    <meta name="twitter:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Hreflang (alternativas) -->
    <link rel="alternate" href="https://embracingdigital.org/pt/home/" hreflang="pt">
    <link rel="alternate" href="https://embracingdigital.org/de/home/" hreflang="de">
    <link rel="alternate" href="https://embracingdigital.org/fr/home/" hreflang="fr">
    <link rel="alternate" href="https://embracingdigital.org/it/home/" hreflang="it">
    <link rel="alternate" href="https://embracingdigital.org/ar/home/" hreflang="ar">
    <link rel="alternate" href="https://embracingdigital.org/ja/home/" hreflang="ja">
    <link rel="alternate" href="https://embracingdigital.org/en/home/" hreflang="en">
    <link rel="alternate" href="https://embracingdigital.org/pt/home/" hreflang="x-default">

    <!-- Favicon & Estilos -->
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/styles.css">

    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P4XHVE79DL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P4XHVE79DL');
    </script>

    <!-- Schema.org: Organization + WebSite -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Abraçando a Transformação Digital",
            "url": "https://embracingdigital.org/",
            "logo": "https://embracingdigital.org/images/logo.png",
            "sameAs": [
                "https://www.youtube.com/@embracingdigital",
                "https://www.linkedin.com/company/embracing-digital-transformation"
            ]
        }
    </script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Abraçando a Transformação Digital",
            "url": "https://embracingdigital.org/",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://embracingdigital.org/pt/search.html?query={query}",
                "query-input": "required name=query"
            }
        }
    </script>
</head>
<body>

<header role="banner">
    <!-- Logotipo -->
    <div class="logo-container">
        <a href="/pt/home/" aria-label="Início — Abraçando a Transformação Digital">
            <img src="/images/logo.png" alt="Logotipo — Abraçando a Transformação Digital" class="site-icon">
        </a>
    </div>

    <!-- Alternância para mobile -->
    <button class="menu-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Alternar menu">☰</button>

    <!-- Navegação principal -->
    <nav id="primary-nav" aria-label="Principal">
        <ul>
            <li><a href="/pt/home/index.html" >Início</a></li>

            <li class="dropdown">
                <a href="/pt/shows/index.html" aria-haspopup="true" aria-expanded="false">Programas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none">
                        <a role="menuitem" href="/pt/episodes/index.html" aria-label="Entrevistas — Abraçando a Transformação Digital">
                            Abraçando a Transformação Digital
                            <small class="nav-note">Entrevistas</small>
                        </a>
                    </li>
                    <li role="none">
                        <a role="menuitem" href="/pt/briefs/index.html" aria-label="Notícias — Digital esta semana">
                            Digital esta semana
                            <small class="nav-note">Notícias</small>
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="/pt/guests/index.html">Convidados</a></li>
            <li><a href="/pt/articles/index.html">Artigos</a></li>

            <!-- Comunidade -->
            <li class="dropdown">
                <a href="/pt/community.html" aria-haspopup="true" aria-expanded="false">Comunidade</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/pt/newsletter.html">Newsletter</a></li>
                    <li role="none"><a role="menuitem" href="https://www.patreon.com/embracingdigital" target="_blank" rel="noopener">Patreon</a></li>
                    <li role="none"><a role="menuitem" href="https://www.linkedin.com/company/embracing-digital-transformation" target="_blank" rel="noopener">Grupo no LinkedIn</a></li>
                </ul>
            </li>

            <li><a href="https://6704f0-2.myshopify.com/" target="_blank" rel="noopener">Loja</a></li>

            <!-- Sobre -->
            <li class="dropdown">
                <a href="/pt/about.html" aria-haspopup="true" aria-expanded="false">Sobre</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/pt/about.html">Sobre o programa</a></li>
                    <li role="none"><a role="menuitem" href="/pt/host.html">Apresentador: Dr. Darren Pulsipher</a></li>
                    <li role="none"><a role="menuitem" href="/pt/sponsors/index.html">Patrocínio & Contato</a></li>
                </ul>
            </li>

            <li><a href="/pt/search.html">Pesquisar</a></li>

            <!-- Idiomas -->
            <li class="dropdown">
                <a href="#" aria-haspopup="true" aria-expanded="false">Idiomas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/ar/home/index.html">العربية</a></li>
                    <li role="none"><a role="menuitem" href="/de/home/index.html">Deutsch</a></li>
                    <li role="none"><a role="menuitem" href="/en/home/index.html">English</a></li>
                    <li role="none"><a role="menuitem" href="/es/home/index.html">Español</a></li>
                    <li role="none"><a role="menuitem" href="/fr/home/index.html">Français</a></li>
                    <li role="none"><a role="menuitem" href="/it/home/index.html">Italiano</a></li>
                    <li role="none"><a role="menuitem" href="/pt/home/index.html">Português</a></li>
                    <li role="none"><a role="menuitem" href="/ja/home/index.html">日本語</a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header>



<a class="skip-link" href="#main">Skip to content</a>

<nav class="breadcrumbs" aria-label="Breadcrumb">
    <ol>
        <li><a href="../../../pt/home/index.html">Home</a></li>
        <li><a href="../../../pt/episodes/index.html">Episodes</a></li>
        <li aria-current="page">Episode 97: The Benefits of Graph Databses</li>
    </ol>
</nav>

<main id="main" role="main">
    <article class="episode-container" itemscope itemtype="https://schema.org/PodcastEpisode">

        <header id="one-episode">
            
                <link itemprop="url" href="https://www.embracingdigital.org/pt/episodes/edt-97/index.html">
                <meta itemprop="mainEntityOfPage" content="https://www.embracingdigital.org/pt/episodes/edt-97/index.html"/>
            

            <h1 id="episode-title" itemprop="name">
                <span class="episode-number">Episode 97</span>
                <span class="episode-title">The Benefits of Graph Databses</span>
            </h1>

            <p class="episode-meta">
                
                    <time datetime="2022-07-28" itemprop="datePublished">2022-07-28T00:00:00.000Z</time>
                
                <span itemprop="author" itemscope itemtype="https://schema.org/Person">
          <meta itemprop="name" content="Dr. Darren Pulsipher">
          Hosted by <span class="host-name">Dr. Darren Pulsipher</span>
        </span>
            </p>

            <meta itemprop="episodeNumber" content="97"/>
            <meta itemprop="inLanguage" content="pt"/>
        </header>

        
            <section class="video-container" aria-label="Watch the episode"
                     itemprop="associatedMedia" itemscope itemtype="https://schema.org/VideoObject">
                <meta itemprop="name" content="Os Benefícios dos Bancos de Dados de Gráfico Video">
                <meta itemprop="embedUrl" content="https://www.youtube.com/embed/url">
                <iframe
                        width="auto"
                        height="auto"
                        src="https://www.youtube.com/embed/url"
                        title="Os Benefícios dos Bancos de Dados de Gráfico Video"
                        loading="lazy"
                        referrerpolicy="strict-origin-when-cross-origin"
                        allowfullscreen
                ></iframe>
            </section>
        

        
            <section class="podcast-container" aria-label="Listen to this episode"
                     itemprop="associatedMedia" itemscope itemtype="https://schema.org/AudioObject">
                <meta itemprop="name" content="Os Benefícios dos Bancos de Dados de Gráfico Audio">
                <meta itemprop="contentUrl" content="https://share.transistor.fm/e/c81eaabc">
                <iframe
                        width="100%"
                        height="180"
                        frameborder="0"
                        scrolling="no"
                        src="https://share.transistor.fm/e/c81eaabc"
                        title="Os Benefícios dos Bancos de Dados de Gráfico Audio"
                        loading="lazy"
                ></iframe>

                <p class="listen-note">
                    Explore more in the <a href="../../../pt/episodes/index.html">episode archive</a>.
                </p>
            </section>
        

        <section class="show-summary" aria-label="Episode summary" itemprop="description">
            <h2>Summary</h2>
            <p>Darren Pulsipher, Arquiteto Principal de Soluções, Intel, Dr. Hadi Ahmadi, Diretor de Arquitetura de Soluções, Katana Graph discutem os benefícios de bancos de dados de gráficos.</p>


            
                <nav class="tags" aria-label="Tags">
                    
                        <a href="../../../pt/search.html?query=moderncomputing"
                           itemprop="keywords">moderncomputing</a>
                    
                        <a href="../../../pt/search.html?query=datamodeling"
                           itemprop="keywords">datamodeling</a>
                    
                        <a href="../../../pt/search.html?query=identitymanagement"
                           itemprop="keywords">identitymanagement</a>
                    
                        <a href="../../../pt/search.html?query=dataanalytics"
                           itemprop="keywords">dataanalytics</a>
                    
                        <a href="../../../pt/search.html?query=generativeai"
                           itemprop="keywords">generativeai</a>
                    
                        <a href="../../../pt/search.html?query=multicloud"
                           itemprop="keywords">multicloud</a>
                    
                        <a href="../../../pt/search.html?query=zerotrust"
                           itemprop="keywords">zerotrust</a>
                    
                        <a href="../../../pt/search.html?query=cybersecurity"
                           itemprop="keywords">cybersecurity</a>
                    
                        <a href="../../../pt/search.html?query=process"
                           itemprop="keywords">process</a>
                    
                        <a href="../../../pt/search.html?query=technology"
                           itemprop="keywords">technology</a>
                    
                </nav>
            

            
                <div class="guests" aria-label="Guests">
                    
                        <span itemprop="actor" itemscope itemtype="https://schema.org/Person">
              <a href="../../../pt/guests/darren-w-pulsipher/index.html" itemprop="url">
                <span itemprop="name">Darren W Pulsipher</span>
              </a>
            </span>
                    
                        <span itemprop="actor" itemscope itemtype="https://schema.org/Person">
              <a href="../../../pt/guests/hadi-ahmadi/index.html" itemprop="url">
                <span itemprop="name">Hadi Ahmadi</span>
              </a>
            </span>
                    
                </div>
            
        </section>

        <section class="show-notes" aria-label="Show notes">
            <p>Hadi obteve seu Ph.D. em ciência da computação em 2012 e pesquisou criptografia e segurança da informação em redes. Ele trabalhou no meio acadêmico por alguns anos e depois ingressou na indústria, focado em diferentes aspectos de soluções de segurança, incluindo gestão de identidade e acesso. Ele começou a aprender mais sobre modelagem de gráficos em 2015 e percebeu como a modelagem de dados em gráficos poderia resolver alguns dos problemas interessantes e complexos em sua área de estudo.</p>
<p>Em bancos de dados de gráfico, um gráfico não significa gráficos ou interfaces gráficas, mas sim uma maneira de estruturar dados no nível de armazenamento para que possam ser recuperados e processados ​​para resolver problemas complexos, especialmente se os dados estiverem interconectados. O gráfico oferece muitos benefícios e pode complementar estruturas de dados ou soluções existentes, como modelos de banco de dados relacionais ou armazenamento de objetos.</p>
<p>A principal diferença entre os bancos de dados gráficos e os bancos de dados relacionais é que, embora ambos tratem de relacionamentos, os bancos de dados relacionais levam os relacionamentos para o nível de metadados e esquema, enquanto os bancos de dados gráficos são orientados por relacionamentos de dados. Em outras palavras, você está relacionando colunas de tabelas em bancos de dados relacionais. Para introduzir um novo relacionamento, é necessário alterar o esquema. O grafo fornece uma infraestrutura sem esquemas onde você pode adicionar mais estrutura em torno de seus dados, mas ainda ter flexibilidade para incorporar qualquer dado não estruturado.</p>
<p>Metade dos dados do mundo foi criada nos últimos anos, coletada de várias fontes diferentes, mas menos de dois por cento foi analisado, a maioria são dados estruturados. Os dados estão sendo coletados, porém as informações são insuficientes para processamento. Deve haver uma maneira de adicionar de forma flexível um pouco de estrutura que seja dinâmica o suficiente para mudar caso haja incerteza, mas ainda se beneficiar da computação otimizada avançada. O gráfico é uma excelente maneira de fazer isso.</p>
<p>Se você está tentando trabalhar com dados correlacionados ou interconectados, ao contrário, por exemplo, de dados isolados com valores críticos, um gráfico oferecerá benefícios por causa das relações. Quase todas as indústrias podem se beneficiar porque os dados não estruturados geralmente vêm de várias fontes e têm naturezas múltiplas.</p>
<p>Um exemplo seria soluções de segurança cibernética. Existem dados de registros e trens de auditoria dos ambientes de rede, infraestrutura de nuvem, hosts de endpoint, etc. Os dados vêm de diferentes fontes, como diretórios ou arquivos de log brutos. Seria benéfico correlacionar os dados, por exemplo, porque geralmente, uma identidade ou usuário que pode fazer parte de um registro do sistema de gerenciamento de identidade pode ser o mesmo usuário que dispara um processo em um laptop, como baixar um anexo de um e-mail. Ao analisar esses padrões, você pode usar essa ligação de correlação para obter mais insights. Em outras palavras, não importa como ou de onde vêm os dados, mas fornecer essa ligação leva a aprender sobre cada registro ao analisá-los em contexto.</p>
<p>Um benefício é que não há problemas de transformação de dados, portanto, isso aumenta a velocidade. Isso também diminui os requisitos de armazenamento.</p>
<p>Os gráficos e as estruturas de bancos de dados relacionais, em geral, são compatíveis. Aqui está um exemplo simplificado de uma rede social: Os tipos de nós no gráfico se parecem com tabelas. Então você pode ter um nó chamado &quot;pessoa&quot; e depois uma tabela chamada &quot;pessoa&quot;. Você pode ter outro nó chamado &quot;localização&quot; e conectar a pessoa a uma localização específica. Você pode ter uma tabela chamada localização e conectá-la a chaves estrangeiras. Em seguida, você tem essa relação de amigos. Um amigo de uma pessoa em um modelo de gráfico é apenas um laço de retroalimentação. Isso permitiria que você modelasse esse esquema. Em um banco de dados relacional, você precisaria criar uma nova tabela chamada amigos e depois conectar. Portanto, mesmo em um nível de esquema, você está adicionando redundância e alguma estrutura por cima disso. E se você precisar adicionar um novo conceito de amizade ou relacionamento, precisará criar novas tabelas, aumentando a redundância e a complexidade.</p>
<p>Outros benefícios de gráficos em relação a bancos de dados relacionais são gráficos em elementos, inteligência artificial em gráficos e a ideia de modelar os dados agora para encontrar padrões com base em como os dados estão conectados. Você pode reduzir o conjunto de dados que está pesquisando ou analisando por causa das relações. Está utilizando o poder dos dados para potencializá-los ainda mais. Os algoritmos em um banco de dados gráfico são muito diferentes dos bancos de dados relacionais e são melhor otimizados para lidar com grandes conjuntos de dados com mais rapidez.</p>
<p>Uma das desvantagens de um banco de dados em gráfico é que é difícil de escalar. Em um banco de dados relacional, é fácil dividir uma tabela e colocá-la em dois servidores, por exemplo. Os primeiros bancos de dados em gráfico foram projetados para serem uma solução única, então, se você quisesse aumentar a escala, seria necessário adicionar mais memória e CPU.</p>
<p>Agora, se você deseja trabalhar com petabytes de dados em gráficos, deseja escalar verticalmente o máximo possível com tecnologia como as VMs Intel, mas também deseja escalar horizontalmente. Novas tecnologias, como a plataforma de gráficos da Katana, ajudam a resolver esse problema de escalabilidade com computação distribuída. Você pode dividir ou dividir o problema em partes e fazer com que cada uma trabalhe em uma pequena parte do gráfico para uma solução final. A Katana provou que você poderia usar 256 máquinas ou ainda mais para processar dados, assim você pode rapidamente ter dezenas de terabytes de dados na memória.</p>
<p>Um banco de dados de gráfico requer um ecossistema semelhante a um banco de dados relacional. O gráfico é um pouco mais dinâmico e flexível. Se você deseja migrar para uma plataforma de análise de gráficos, que vai além dos bancos de dados operacionais, você pode aproveitar outras coisas, como armazenamento de dados e capacidades de data lake. Armazenamento e computação seriam separados, ou seja, as tecnologias de processamento de gráficos que executam tudo na memória não precisam depender do armazenamento ligado aos serviços, para que você possa ter um serviço de armazenamento diferente.</p>
<p>Katana utiliza armazenamento de objetos e, em seguida, quando eles desejam computar, carregam de forma oportunista o que desejam do grafo para a memória distribuída de todas as máquinas. Os dados retornam imutáveis para o armazenamento, então se você, por exemplo, destruir todo o cluster, não perde nada. Todos os dados já estão lá e armazenados. Bancos de dados relacionais são uma área mais madura, mas os bancos de dados de grafo estão se tornando mais bem suportados no ecossistema.</p>
<p>Com base nos oito anos de experiência de Hadi no campo, conversando com os interessados e clientes, todos imediatamente reconhecem os benefícios dos bancos de dados de gráficos. As limitações podem ser que eles não conseguem acompanhar a escalabilidade ou o custo. O trabalho da Katana e de outras empresas de tecnologia de gráficos é tornar os gráficos mais uma ferramenta comum que os clientes possam usar para várias tarefas e menos um luxo no banco de dados. Por exemplo, a Katana está fornecendo aos clientes soluções de identidade baseadas em gráficos e gerenciamento maciço de dados.</p>
<p>Bons casos de uso de grafos seriam a invenção precoce de soluções de gráficos específicas para algumas empresas como o LinkedIn e o Facebook, que possuem seus próprios gráficos sociais. Agora, um encaixe natural está no comércio eletrônico para motores de recomendação. Encontrar conexões entre clientes, contas, compras e outros comportamentos possibilitará melhores recomendações imediatamente para os compradores de uma maneira que não pode ser feita com consultas a bancos de dados relacionais.</p>
<p>Para saber mais sobre a Katana ou como entrar em contato com o Hadi, acesse embracingdigital.org.</p>

        </section>

        

    </article>
</main>

<!-- Structured Data -->
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "PodcastSeries",
  "@id": "https://www.embracingdigital.org/pt/episodes/index.html#series",
  "name": "Embracing Digital Transformation",
  "url": "https://www.embracingdigital.org/pt/episodes/index.html",
  "inLanguage": "pt",
  "description": "A podcast about the digital transformation of the world.",
  "publisher": {
    "@type": "Organization",
    "@id": "https://www.embracingdigital.org/#org",
    "name": "Embracing Digital Transformation",
    "url": "https://www.embracingdigital.org",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.embracingdigital.org/images/logo.png",
      "width": 512,
      "height": 512
    }
  }
}</script>
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "PodcastEpisode",
  "@id": "https://www.embracingdigital.org/pt/episodes/edt-97/index.html#episode",
  "url": "https://www.embracingdigital.org/pt/episodes/edt-97/index.html",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.embracingdigital.org/pt/episodes/edt-97/index.html"
  },
  "name": "Os Benefícios dos Bancos de Dados de Gráfico",
  "episodeNumber": 97,
  "datePublished": "2022-07-28",
  "inLanguage": "pt",
  "description": "Darren Pulsipher, Arquiteto Principal de Soluções, Intel, Dr. Hadi Ahmadi, Diretor de Arquitetura de Soluções, Katana Graph discutem os benefícios de bancos de dados de gráficos.",
  "partOfSeries": {
    "@id": "https://www.embracingdigital.org/pt/episodes/index.html#series"
  },
  "author": {
    "@type": "Person",
    "name": "Dr. Darren Pulsipher"
  },
  "creator": {
    "@type": "Person",
    "name": "Dr. Darren Pulsipher"
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://www.embracingdigital.org/pt/episodes/edt-97/thumbnail.jpg"
  },
  "associatedMedia": [
    {
      "@type": "VideoObject",
      "name": "Os Benefícios dos Bancos de Dados de Gráfico Video",
      "embedUrl": "https://www.youtube.com/embed/url"
    },
    {
      "@type": "AudioObject",
      "name": "Os Benefícios dos Bancos de Dados de Gráfico Audio",
      "contentUrl": "https://share.transistor.fm/e/c81eaabc"
    }
  ],
  "actor": [
    {
      "@type": "Person",
      "name": "Darren W Pulsipher",
      "url": "https://www.embracingdigital.org/../../../pt/guests/darren-w-pulsipher/index.html"
    },
    {
      "@type": "Person",
      "name": "Hadi Ahmadi",
      "url": "https://www.embracingdigital.org/../../../pt/guests/hadi-ahmadi/index.html"
    }
  ]
}</script>

<footer id="footer">
    <div class="footer-content">
        <p>Copyright &copy; 2025 Paidar Productions LLC</p>
        <p>Todos os direitos reservados</p>
    </div>
</footer>
<script>
    // year
    (function(){ var y=document.getElementById('y'); if(y){ y.textContent = new Date().getFullYear(); } })();

    // Guard for pages without nav
    const toggle = document.querySelector('.menu-toggle');
    const nav    = document.querySelector('nav#primary-nav');
    if (nav) {
        // Mobile: toggle .menu-open on <body>
        toggle?.addEventListener('click', () => {
            const open = document.body.classList.toggle('menu-open');
            toggle.setAttribute('aria-expanded', String(open));
        });

        // Dropdowns: tap/click + keyboard
        document.querySelectorAll('li.dropdown > a').forEach(link => {
            const li = link.parentElement;
            const submenu = li.querySelector('.dropdown-menu');

            link.addEventListener('click', (e) => {
                if (!submenu) return;
                e.preventDefault();

                // close others
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    if (a !== link) {
                        a.setAttribute('aria-expanded', 'false');
                        a.parentElement.classList.remove('open');
                    }
                });

                const isOpen = li.classList.toggle('open');
                link.setAttribute('aria-expanded', String(isOpen));
            });

            link.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowDown') { e.preventDefault(); submenu?.querySelector('a')?.focus(); }
                if (e.key === 'Escape')    { li.classList.remove('open'); link.setAttribute('aria-expanded','false'); link.focus(); }
            });
        });

        // Close dropdowns on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('nav')) {
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    a.setAttribute('aria-expanded','false');
                    a.parentElement.classList.remove('open');
                });
            }
        });
    }
</script>

