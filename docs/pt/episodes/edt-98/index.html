<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Título de página dinâmico -->
    <title>Embracing Digital Transformation</title>

    <!-- SEO -->
    <link rel="canonical" href="https://embracingdigital.org/pt/home/">
    <meta name="description" content="&lt;p&gt;Neste episódio, Darren relembra com Chetan Venkatesh, CEO da MacroMeta. Venkatesh possui uma longa história em gerenciamento de dados desde os primeiros dias da Grid Computing e iniciou a MacroMeta para lidar com o gerenciamento de dados nas bordas geograficamente dispersas, centros de dados e nuvens.&lt;/p&gt;
">
    <meta name="keywords" content="Transformação digital, podcast, entrevistas, notícias, IA, cibersegurança, edge computing, gestão de dados">
    <meta name="author" content="Dr. Darren W. Pulsipher">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Embracing Digital Transformation — Entrevistas, Notícias e Comunidade">
    <meta property="og:description" content="&lt;p&gt;Neste episódio, Darren relembra com Chetan Venkatesh, CEO da MacroMeta. Venkatesh possui uma longa história em gerenciamento de dados desde os primeiros dias da Grid Computing e iniciou a MacroMeta para lidar com o gerenciamento de dados nas bordas geograficamente dispersas, centros de dados e nuvens.&lt;/p&gt;
">
    <meta property="og:url" content="https://embracingdigital.org/pt/home/">
    <meta property="og:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Embracing Digital Transformation — Entrevistas, Notícias e Comunidade">
    <meta name="twitter:description" content="&lt;p&gt;Neste episódio, Darren relembra com Chetan Venkatesh, CEO da MacroMeta. Venkatesh possui uma longa história em gerenciamento de dados desde os primeiros dias da Grid Computing e iniciou a MacroMeta para lidar com o gerenciamento de dados nas bordas geograficamente dispersas, centros de dados e nuvens.&lt;/p&gt;
">
    <meta name="twitter:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Hreflang (alternativas) -->
    <link rel="alternate" href="https://embracingdigital.org/pt/home/" hreflang="pt">
    <link rel="alternate" href="https://embracingdigital.org/de/home/" hreflang="de">
    <link rel="alternate" href="https://embracingdigital.org/fr/home/" hreflang="fr">
    <link rel="alternate" href="https://embracingdigital.org/it/home/" hreflang="it">
    <link rel="alternate" href="https://embracingdigital.org/ar/home/" hreflang="ar">
    <link rel="alternate" href="https://embracingdigital.org/ja/home/" hreflang="ja">
    <link rel="alternate" href="https://embracingdigital.org/en/home/" hreflang="en">
    <link rel="alternate" href="https://embracingdigital.org/pt/home/" hreflang="x-default">

    <!-- Favicon & Estilos -->
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/styles.css">

    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P4XHVE79DL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P4XHVE79DL');
    </script>

    <!-- Schema.org: Organization + WebSite -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Abraçando a Transformação Digital",
            "url": "https://embracingdigital.org/",
            "logo": "https://embracingdigital.org/images/logo.png",
            "sameAs": [
                "https://www.youtube.com/@embracingdigital",
                "https://www.linkedin.com/company/embracing-digital-transformation"
            ]
        }
    </script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Abraçando a Transformação Digital",
            "url": "https://embracingdigital.org/",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://embracingdigital.org/pt/search.html?query={query}",
                "query-input": "required name=query"
            }
        }
    </script>
</head>
<body>

<header role="banner">
    <!-- Logotipo -->
    <div class="logo-container">
        <a href="/pt/home/" aria-label="Início — Abraçando a Transformação Digital">
            <img src="/images/logo.png" alt="Logotipo — Abraçando a Transformação Digital" class="site-icon">
        </a>
    </div>

    <!-- Alternância para mobile -->
    <button class="menu-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Alternar menu">☰</button>

    <!-- Navegação principal -->
    <nav id="primary-nav" aria-label="Principal">
        <ul>
            <li><a href="/pt/home/index.html" >Início</a></li>

            <li class="dropdown">
                <a href="/pt/shows/index.html" aria-haspopup="true" aria-expanded="false">Programas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none">
                        <a role="menuitem" href="/pt/episodes/index.html" aria-label="Entrevistas — Abraçando a Transformação Digital">
                            Abraçando a Transformação Digital
                            <small class="nav-note">Entrevistas</small>
                        </a>
                    </li>
                    <li role="none">
                        <a role="menuitem" href="/pt/briefs/index.html" aria-label="Notícias — Digital esta semana">
                            Digital esta semana
                            <small class="nav-note">Notícias</small>
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="/pt/guests/index.html">Convidados</a></li>
            <li><a href="/pt/articles/index.html">Artigos</a></li>

            <!-- Comunidade -->
            <li class="dropdown">
                <a href="/pt/community.html" aria-haspopup="true" aria-expanded="false">Comunidade</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/pt/newsletter.html">Newsletter</a></li>
                    <li role="none"><a role="menuitem" href="https://www.patreon.com/embracingdigital" target="_blank" rel="noopener">Patreon</a></li>
                    <li role="none"><a role="menuitem" href="https://www.linkedin.com/company/embracing-digital-transformation" target="_blank" rel="noopener">Grupo no LinkedIn</a></li>
                </ul>
            </li>

            <li><a href="https://6704f0-2.myshopify.com/" target="_blank" rel="noopener">Loja</a></li>

            <!-- Sobre -->
            <li class="dropdown">
                <a href="/pt/about.html" aria-haspopup="true" aria-expanded="false">Sobre</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/pt/about.html">Sobre o programa</a></li>
                    <li role="none"><a role="menuitem" href="/pt/host.html">Apresentador: Dr. Darren Pulsipher</a></li>
                    <li role="none"><a role="menuitem" href="/pt/sponsors/index.html">Patrocínio & Contato</a></li>
                </ul>
            </li>

            <li><a href="/pt/search.html">Pesquisar</a></li>

            <!-- Idiomas -->
            <li class="dropdown">
                <a href="#" aria-haspopup="true" aria-expanded="false">Idiomas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/ar/home/index.html">العربية</a></li>
                    <li role="none"><a role="menuitem" href="/de/home/index.html">Deutsch</a></li>
                    <li role="none"><a role="menuitem" href="/en/home/index.html">English</a></li>
                    <li role="none"><a role="menuitem" href="/es/home/index.html">Español</a></li>
                    <li role="none"><a role="menuitem" href="/fr/home/index.html">Français</a></li>
                    <li role="none"><a role="menuitem" href="/it/home/index.html">Italiano</a></li>
                    <li role="none"><a role="menuitem" href="/pt/home/index.html">Português</a></li>
                    <li role="none"><a role="menuitem" href="/ja/home/index.html">日本語</a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header>

<section id="one-episode"
         itemscope itemtype="https://schema.org/PodcastEpisode">
  <meta itemprop="mainEntityOfPage" content=""/>
  <header>
    <h1 id="episode-title" itemprop="name">
      #98 <span>A Emergência da Rede de Dados Global</span>
    </h1>
    <time datetime="2022-08-04T00:00:00.000Z"
          itemprop="datePublished">
      2022-08-04T00:00:00.000Z
    </time>
    <meta itemprop="episodeNumber" content="98"/>
  </header>

  <!-- VideoObject -->
  <div class="video-container" itemprop="associatedMedia"
       itemscope itemtype="https://schema.org/VideoObject">
    <meta itemprop="name" content="A Emergência da Rede de Dados Global">
    <meta itemprop="embedUrl"
          content="https://www.youtube.com/embed/url">
    <iframe width="auto" height="auto"
            src="https://www.youtube.com/embed/url?autoplay=1"
            title="A Emergência da Rede de Dados Global Video"></iframe>
  </div>

  <!-- AudioObject -->
  <aside class="podcast-container" itemprop="associatedMedia"
         itemscope itemtype="https://schema.org/AudioObject">
    <meta itemprop="name" content="A Emergência da Rede de Dados Global">
    <meta itemprop="contentUrl"
          content="https://share.transistor.fm/e/140001aa">
    <iframe width="100%" height="180" frameborder="0" scrolling="no"
            src="https://share.transistor.fm/e/140001aa"
            title="A Emergência da Rede de Dados Global Audio"></iframe>
  </aside>

  <div class="show-summary" itemprop="description">
    <p><p>Neste episódio, Darren relembra com Chetan Venkatesh, CEO da MacroMeta. Venkatesh possui uma longa história em gerenciamento de dados desde os primeiros dias da Grid Computing e iniciou a MacroMeta para lidar com o gerenciamento de dados nas bordas geograficamente dispersas, centros de dados e nuvens.</p>
</p>
    <nav class="tags" aria-label="Tags">
      
        <a href="../../../pt/search.html?query=moderncomputing"
           itemprop="keywords">moderncomputing</a>
      
        <a href="../../../pt/search.html?query=edgecomputing"
           itemprop="keywords">edgecomputing</a>
      
        <a href="../../../pt/search.html?query=dataprivacy"
           itemprop="keywords">dataprivacy</a>
      
        <a href="../../../pt/search.html?query=multicloud"
           itemprop="keywords">multicloud</a>
      
        <a href="../../../pt/search.html?query=zerotrust"
           itemprop="keywords">zerotrust</a>
      
        <a href="../../../pt/search.html?query=cybersecurity"
           itemprop="keywords">cybersecurity</a>
      
        <a href="../../../pt/search.html?query=technology"
           itemprop="keywords">technology</a>
      
        <a href="../../../pt/search.html?query=process"
           itemprop="keywords">process</a>
      
    </nav>
    <div class="guests" itemprop="actor" itemscope itemtype="https://schema.org/Person">
      
        <a href="../../../pt/guests/darren-w-pulsipher/index.html"
           itemprop="name" target="_blank">Darren W Pulsipher</a>
      
        <a href="../../../pt/guests/chetan-venkatesh/index.html"
           itemprop="name" target="_blank">Chetan Venkatesh</a>
      
    </div>
  </div>

  <div class="show-notes" itemprop="transcript">
    <p>Chetan é um engenheiro que se tornou especialista em operações e start-ups (Macrometa é sua quarta start-up). Ele diz que tem trabalhado no mesmo problema de lidar com dados distribuídos e reduzir a latência por vinte anos.</p>
<p>Os dados não estão mais apenas em um centro de dados, mas em todos os lugares: na nuvem, na borda e nos laptops das pessoas. Gerenciar tudo isso de forma eficaz é um desafio.</p>
<p>Cerca de dez anos atrás, Marc Andreessen disse que o software está devorando o mundo. Neste ponto, o software engoliu tudo e transformou todo tipo de restrição e barreira em oportunidades. A computação multithreading é uma das barreiras que foi superada com a nuvem. É possível construir aplicativos que funcionam em diferentes partes do mundo simultaneamente. Um movimento de desenvolvedores está acontecendo em paralelo para tornar tudo o mais simples possível para um profissional de ciência da computação médio. Portanto, de um lado temos uma sofisticada evolução tecnológica e, do outro lado, um movimento em direção à simplicidade.</p>
<p>Arquiteturas como Jamstack permitem que a computação distribuída ocorra em grande escala com muita simplicidade, mas ainda há uma vasta fronteira a ser descoberta e explorada. A oportunidade de expansão de terras extensas está agora na borda. O gerenciamento de dados distribuídos e a borda são duas faces da mesma moeda.</p>
<p>Um grande problema é que parte do desenvolvimento de software está se movendo para funcionar como um serviço que ignora os dados. Além disso, existe a percepção de que os dados são ubíquos, mas grande parte das bordas não está sempre conectada. Não há garantia de que um aplicativo tenha acesso a todos os dados. As redes não estão mais centralizadas; a ideia de microsserviços sem estado surgiu do movimento da nuvem. Essa falta de estado pode se tornar uma barreira enorme. É por isso que arquiteturas como o Jamstack e funções serverless tratam os dados como uma questão periférica, e não central.</p>
<p>As estruturas de dados sem estado são simples. Você tem um lugar específico onde deve registrar seus dados e, em seguida, continuar com o estado sem estado novamente. As estruturas de dados com estado requerem infraestruturas robustas com estruturas de dados mais complexas, pois elas oferecem suporte à aplicação à medida que ela emite constantemente seu estado. À medida que avançamos para um mundo de dados em tempo real em que o estado é constantemente emitido de algum lugar no ecossistema, a infraestrutura se torna complexa e difícil de gerenciar porque não são projetadas para isso. É aí que entra a Macrometa. Eles construíram uma nova plataforma para esse estado ativo, contínuo e em tempo real em uma escala de exabyte.</p>
<p>Lidar com esses dados em streaming em um estado ativo e dinâmico é uma mudança significativa para muitos desenvolvedores de software. Desde que as primeiras infraestruturas em nuvem surgiram, seguidas por plataformas de big data e serviços de dados, a indústria se tornou eficiente em absorver, processar e analisar dados históricos. Mas agora, estamos em um mundo onde os dados estão em um espectro, em vez de existir como um monólito. Uma qualidade recém-apreciada é que os dados têm insights e valor perecíveis. Alguns dados têm uma vida útil breve. As escalas de tempo atuais são muito grandes para usar dados de forma eficiente; precisamos de sistemas que comuniquem eficientemente em até 50 milissegundos e reduzam o esforço cognitivo para as pessoas que interagem com esses sistemas.</p>
<p>A maioria das pessoas entende mal a latência: não é algo que traz alegria, mas sim a sua falta que causa frustração. Por exemplo, por quanto tempo alguém tolerará um vídeo do YouTube com travamentos ou um show da Netflix com carregamento lento? Cinquenta milissegundos para uma máquina é uma eternidade. Uma máquina pode realizar uma enorme quantidade de coisas em 50 milissegundos, então a latência se torna essencial, especialmente ao considerar o valor perecível dos dados.</p>
<p>Outra questão agora é que, devido à nuvem, interconectividade e ao sistema global, as startups se tornaram empresas multinacionais, e os dados se tornaram sensíveis à localização. Alguns dados são regulados, outros são informações de identificação pessoal (PII) e não podem ser expatriados em certas jurisdições, etc. Um excelente exemplo desse problema é como os europeus não querem que seus dados saiam de suas fronteiras, mas grande parte da infraestrutura de nuvem e das aplicações estão aqui nos Estados Unidos.</p>
<p>Um terceiro problema é que os dados estão armazenados em muitos lugares; existem limites entre sistemas, físicos e lógicos. Os dados podem ser essencialmente estáticos e rígidos, então precisamos de uma infraestrutura que permita que os dados se conectem e fluam em tempo real, com consistência e garantias de ordenação. Mais importante ainda, isso cria fungibilidade para ser consumido rapidamente de maneiras diversas.</p>
<p>Um problema adicional é que os dados contêm muitos ruídos, e não faz sentido transferir grandes distâncias intercontinentais, pagando taxas de transferência, apenas para depois descartar a maior parte deles. Os dados perdem valor até chegarem ao seu destino. Além disso, há uma alta taxa de atualização, então os sistemas frequentemente trabalham com dados desatualizados.</p>
<p>Precisamos de novas formas de resolver esses tipos de problemas de dados distribuídos. Chetan acredita que os próximos dez anos pertencerão a essa área das ciências de dados.</p>
<p>A primeira geração de soluções de dados distribuídos utilizou a transformação operacional. O Google Docs é um excelente exemplo disso. No entanto, a transformação operacional requer centralização do controle, portanto, não escala bem. O Google encontrou uma maneira de escalar, mas isso não é generalizado para o desenvolvedor médio. Talvez haja apenas cinco empresas no mundo que o entendem nessa escala, e grande parte desse conhecimento está restrito a essas empresas e tecnologia proprietária.</p>
<p>A Macrometa está trabalhando com a comunidade e a academia para tentar criar um novo corpo de conhecimento, muito mais eficiente do que esses modelos centralizados, de forma completamente distribuída.</p>
<p>Atualmente, existem infraestruturas disponíveis que são excelentes em resolver problemas históricos do tipo sistema de registro. Elas estão tentando seguir em direção aos dados em tempo real, mas suas arquiteturas não são fundamentalmente feitas para isso. Esses novos problemas com dados sensíveis ao tempo e localização, valor de atuação, taxas de atualização, gravidade de dados e ruído de dados requerem uma nova maneira, uma nova infraestrutura. Chetan chama isso de sistema de interação, em vez de sistema de registro, porque sistemas de interação são redes de dados, próximas de onde você origina e consome dados, que então filtram e enriquecem todos eles em linha e roteiam para seus destinatários pretendidos. É uma função de rede.</p>
<p>A Macrometa construiu processadores de rede que estão movendo os dados por aí - uma rede global de dados. É um sistema de API sem servidor onde os desenvolvedores simplesmente consomem APIs para resolver problemas de dados ativos e operacionais em tempo real. A Macrometa é uma rede global de dados na topologia de um CDM, mas com uma plataforma de dados como o Snowflake que produz elementos de dados ricos para lidar com valores de dados ativos e operacionais em tempo real.</p>
<p>Você pode integrar ferramentas analíticas na rede global de dados e implantar análises perto de onde os dados são gerados ou necessários. Assim como a Amazon mudou fundamentalmente a distribuição varejista com arquitetura local e algoritmos para manter os armazéns locais otimizados para envios durante a noite, a Macrometa fez o mesmo com os dados. Eles estão aproximando os dados e a computação nesses dados, permitindo que isso aconteça em milissegundos. Essa capacidade de criar loops de informações em tempo real é um habilitador poderoso. Por exemplo, pequenos varejistas podem usar o inventário da loja local em seu comércio eletrônico sem se comprometer demais para competir com a Amazon.</p>
<p>Um ótimo caso de uso para a plataforma Macrometa é na cibersegurança. Alguns clientes estão substituindo seus modelos de dados centralizados para aproveitar a latência reduzida, permitindo bloquear ameaças em tempo real.</p>
<p>A rede mundial de dados é uma camada de transformação entre suas fontes e receptores de dados com os consumidores e publicadores. Ela é composta por três elementos tecnológicos. O primeiro é a malha global de dados, que é a camada de integração para dados. O segundo é um tecido global de computação que permite orquestrar dados e lógica de negócios na forma de funções e contêineres globalmente. A terceira peça é um tecido global de privacidade: como garantir a segurança dos dados e cumprir diferentes regimes e regulamentações de dados que afetam se seus dados estão sendo transmitidos ou armazenados.</p>
<p>A malha global de dados é uma maneira de integrar rapidamente e facilmente dados de diferentes sistemas, independentemente de suas fronteiras, sejam físicas ou lógicas. Tudo é incorporado e flui com consistência e garantias de ordenação. O valor mais significativo dessa malha é que ela torna os dados fungíveis e consumíveis, permitindo que você coloque APIs nos dados rapidamente. Isso pode ser feito em algumas horas, em comparação com o tempo usual de meses. A rede global de dados é projetada para trilhões de eventos por segundo, de forma que possa movimentar dados em escalas imensas a um custo 90% menor do que a nuvem.</p>
<p>A estrutura global de computação traz lógica empresarial e orquestração para aproximar o processamento de seus dados ao local onde eles têm origem ou são consumidos. Esse é o padrão anti-nuvem. A Macrometa vai mover cirurgicamente e de forma dinâmica esses microsserviços que precisam cumprir regulamentações de dados, por exemplo, para os locais corretos de execução.</p>
<p>A última peça é a proteção de dados. Este é um problema complexo e as respostas que temos hoje, por exemplo, abrir um silo separado para aquela geolocalização específica a fim de cumprir com particulares todas as vezes que inicializar uma instância em seu aplicativo, não são boas. A plataforma da Macrometa possui uma rede de dados que já integra e faz com que seus dados fluam através de todas as fronteiras, juntamente com funções de computação e ingestão de dados sem limites. Agora, ela pode criar fronteiras lógicas e fixar dados em regiões específicas para proteção de dados. Eles podem definir afinidades e políticas sobre como os dados vivem e se replicam em uma região, como por exemplo, se eles devem ser anonimizados quando copiados para fora da região.</p>
<p>A tecnologia da Macrometa permite casos de uso que são impossíveis de serem realizados na nuvem, pois as nuvens estão muito distantes ou são muito lentas. A Macrometa construiu a infraestrutura para resolver problemas de dados em tempo real e transformá-los em oportunidades, em vez de desafios. Para mais informações sobre a Macrometa, acesse macrometa.com.</p>

  </div>

  <div class="sponsor-container">
    <p>Thank you to our sponsors for supporting this episode!</p>
    <ol>
      
    </ol>
  </div>
</section>

<!-- PodcastEpisode JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "PodcastEpisode",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": ""
  },
  "name": "A Emergência da Rede de Dados Global",
  "episodeNumber": "98",
  "datePublished": "2022-08-04T00:00:00.000Z",
  "description": "<p>Neste episódio, Darren relembra com Chetan Venkatesh, CEO da MacroMeta. Venkatesh possui uma longa história em gerenciamento de dados desde os primeiros dias da Grid Computing e iniciou a MacroMeta para lidar com o gerenciamento de dados nas bordas geograficamente dispersas, centros de dados e nuvens.</p>
",
  "associatedMedia": [
    {
      "@type": "VideoObject",
      "name": "A Emergência da Rede de Dados Global Video",
      "embedUrl": "https://www.youtube.com/embed/url"
    },
    {
      "@type": "AudioObject",
      "name": "A Emergência da Rede de Dados Global Audio",
      "contentUrl": "https://share.transistor.fm/e/140001aa"
    }
  ],
  "actor": [
    
    {
      "@type": "Person",
      "name": "Darren W Pulsipher"
    }
    
    {
      "@type": "Person",
      "name": "Chetan Venkatesh"
    }
    
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Embracing Digital Transformation",
    "logo": {
      "@type": "ImageObject",
      "url": "https://embracingdigital.org/images/logo.png"
    }
  }
}
</script>
<footer id="footer">
    <div class="footer-content">
        <p>Copyright &copy; 2025 Paidar Productions LLC</p>
        <p>Todos os direitos reservados</p>
    </div>
</footer>
<script>
    // year
    (function(){ var y=document.getElementById('y'); if(y){ y.textContent = new Date().getFullYear(); } })();

    // Guard for pages without nav
    const toggle = document.querySelector('.menu-toggle');
    const nav    = document.querySelector('nav#primary-nav');
    if (nav) {
        // Mobile: toggle .menu-open on <body>
        toggle?.addEventListener('click', () => {
            const open = document.body.classList.toggle('menu-open');
            toggle.setAttribute('aria-expanded', String(open));
        });

        // Dropdowns: tap/click + keyboard
        document.querySelectorAll('li.dropdown > a').forEach(link => {
            const li = link.parentElement;
            const submenu = li.querySelector('.dropdown-menu');

            link.addEventListener('click', (e) => {
                if (!submenu) return;
                e.preventDefault();

                // close others
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    if (a !== link) {
                        a.setAttribute('aria-expanded', 'false');
                        a.parentElement.classList.remove('open');
                    }
                });

                const isOpen = li.classList.toggle('open');
                link.setAttribute('aria-expanded', String(isOpen));
            });

            link.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowDown') { e.preventDefault(); submenu?.querySelector('a')?.focus(); }
                if (e.key === 'Escape')    { li.classList.remove('open'); link.setAttribute('aria-expanded','false'); link.focus(); }
            });
        });

        // Close dropdowns on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('nav')) {
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    a.setAttribute('aria-expanded','false');
                    a.parentElement.classList.remove('open');
                });
            }
        });
    }
</script>

