<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Embracing Digital Transformation</title>
</head>
<body>
<script>
    var lang = navigator.language || navigator.userLanguage;
    if (lang.indexOf('de') == 0)
        window.location = './de/home/index.html';
    else if(lang.indexOf('es') == 0)
        window.location = './es/home/index.html';
    else if(lang.indexOf('pt') == 0)
        window.location = './es/home/index.html';
    else if(lang.indexOf('fr') == 0)
        window.location = './fr/home/index.html';
    else if(lang.indexOf('ar') == 0)
        window.location = './ar/home/index.html';
    else if(lang.indexOf('ja') == 0)
        window.location = './ja/home/index.html';
    else if(lang.indexOf('it') == 0)
        window.location = './it/home/index.html';
    else
        window.location = './en/home/index.html';

    document.addEventListener("DOMContentLoaded", () => {
        // Get the current URL
        const currentUrl = window.location.href;

        // Match the old URL format
        const oldUrlPattern = /episode-(EDT\d+)-(\w+)/i; // Matches episode ID (like EDT252) and language (like en)
        const match = currentUrl.match(oldUrlPattern);

        if (match) {
            // Extract the episode ID (e.g., "EDT252") and the language (e.g., "en")
            const episodeId = match[1].toLowerCase(); // Lowercase for the episode ID
            const language = match[2]; // Language remains as-is

            // Convert episode ID to new format - add a dash in "edt-252"
            const newEpisodeId = episodeId.replace(/(\d+)/, "-$1");

            // Generate the new URL
            const newUrl = `http://www.embracingdigital.org/${language}/episodes/${newEpisodeId}/index.html`;

            // Redirect the browser to the new URL
            window.location.href = newUrl;
        }
    });
</script>

</body>
</html>
