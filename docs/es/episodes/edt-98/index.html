<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Título de página dinámico -->
    <title>The Emergence of the Global Data Network</title>

    <!-- SEO -->
    <link rel="canonical" href="https://embracingdigital.org/es/home/">
    <meta name="description" content="&lt;p&gt;En este episodio, Darren rememora con Chetan Venkatesh, CEO de MacroMeta. Venkatesh tiene una larga trayectoria en gestión de datos desde los primeros días de la Computación en Red y ha fundado MacroMeta para abordar la gestión de datos en los bordes dispersos globalmente, centros de datos y nubes.&lt;/p&gt;
">
    <meta name="keywords" content="Transformación Digital, pódcast, entrevistas, noticias, IA, ciberseguridad, edge computing, gestión de datos">
    <meta name="author" content="Dr. Darren W. Pulsipher">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="The Emergence of the Global Data Network — Entrevistas, Noticias y Comunidad">
    <meta property="og:description" content="&lt;p&gt;En este episodio, Darren rememora con Chetan Venkatesh, CEO de MacroMeta. Venkatesh tiene una larga trayectoria en gestión de datos desde los primeros días de la Computación en Red y ha fundado MacroMeta para abordar la gestión de datos en los bordes dispersos globalmente, centros de datos y nubes.&lt;/p&gt;
">
    <meta property="og:url" content="https://embracingdigital.org/es/home/">
    <meta property="og:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="The Emergence of the Global Data Network — Entrevistas, Noticias y Comunidad">
    <meta name="twitter:description" content="&lt;p&gt;En este episodio, Darren rememora con Chetan Venkatesh, CEO de MacroMeta. Venkatesh tiene una larga trayectoria en gestión de datos desde los primeros días de la Computación en Red y ha fundado MacroMeta para abordar la gestión de datos en los bordes dispersos globalmente, centros de datos y nubes.&lt;/p&gt;
">
    <meta name="twitter:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Hreflang (alternativas) -->
    <link rel="alternate" href="https://embracingdigital.org/es/home/" hreflang="es">
    <link rel="alternate" href="https://embracingdigital.org/de/home/" hreflang="de">
    <link rel="alternate" href="https://embracingdigital.org/fr/home/" hreflang="fr">
    <link rel="alternate" href="https://embracingdigital.org/it/home/" hreflang="it">
    <link rel="alternate" href="https://embracingdigital.org/pt/home/" hreflang="pt">
    <link rel="alternate" href="https://embracingdigital.org/ar/home/" hreflang="ar">
    <link rel="alternate" href="https://embracingdigital.org/ja/home/" hreflang="ja">
    <link rel="alternate" href="https://embracingdigital.org/es/home/" hreflang="x-default">

    <!-- Favicon y estilos -->
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/styles.css">

    <!-- Analítica -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P4XHVE79DL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P4XHVE79DL');
    </script>

    <!-- Schema.org: Organization + WebSite -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Abrazando la Transformación Digital",
            "url": "https://embracingdigital.org/",
            "logo": "https://embracingdigital.org/images/logo.png",
            "sameAs": [
                "https://www.youtube.com/@embracingdigital",
                "https://www.linkedin.com/company/embracing-digital-transformation"
            ]
        }
    </script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Abrazando la Transformación Digital",
            "url": "https://embracingdigital.org/",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://embracingdigital.org/es/search.html?query={query}",
                "query-input": "required name=query"
            }
        }
    </script>
</head>
<body>

<header role="banner">
    <!-- Logo -->
    <div class="logo-container">
        <a href="/es/home/" aria-label="Inicio — Abrazando la Transformación Digital">
            <img src="/images/logo.png" alt="Logo — Abrazando la Transformación Digital" class="site-icon">
        </a>
    </div>

    <!-- Botón móvil -->
    <button class="menu-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Alternar menú">☰</button>

    <!-- Navegación principal -->
    <nav id="primary-nav" aria-label="Principal">
        <ul>
            <li><a href="/es/home/index.html" >Inicio</a></li>

            <li class="dropdown">
                <a href="/es/shows/index.html" aria-haspopup="true" aria-expanded="false">Programas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none">
                        <a role="menuitem" href="/es/episodes/index.html" aria-label="Entrevistas — Abrazando la Transformación Digital">
                            Abrazando la Transformación Digital
                            <small class="nav-note">Entrevistas</small>
                        </a>
                    </li>
                    <li role="none">
                        <a role="menuitem" href="/es/briefs/index.html" aria-label="Noticias — Digital esta semana">
                            Digital esta semana
                            <small class="nav-note">Noticias</small>
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="/es/guests/index.html">Invitados</a></li>
            <li><a href="/es/articles/index.html">Artículos</a></li>

            <!-- Comunidad -->
            <li class="dropdown">
                <a href="/es/community.html" aria-haspopup="true" aria-expanded="false">Comunidad</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/es/newsletter.html">Boletín</a></li>
                    <li role="none"><a role="menuitem" href="https://www.patreon.com/embracingdigital" target="_blank" rel="noopener">Patreon</a></li>
                    <li role="none"><a role="menuitem" href="https://www.linkedin.com/company/embracing-digital-transformation" target="_blank" rel="noopener">Grupo de LinkedIn</a></li>
                </ul>
            </li>

            <li><a href="https://6704f0-2.myshopify.com/" target="_blank" rel="noopener">Tienda</a></li>

            <!-- Acerca de -->
            <li class="dropdown">
                <a href="/es/about.html" aria-haspopup="true" aria-expanded="false">Acerca de</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/es/about.html">Sobre el programa</a></li>
                    <li role="none"><a role="menuitem" href="/es/host.html">Anfitrión: Dr. Darren Pulsipher</a></li>
                    <li role="none"><a role="menuitem" href="/es/sponsors/index.html">Patrocinios y contacto</a></li>
                </ul>
            </li>

            <li><a href="/es/search.html">Buscar</a></li>

            <!-- Idiomas -->
            <li class="dropdown">
                <a href="#" aria-haspopup="true" aria-expanded="false">Idiomas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/ar/home/index.html">العربية</a></li>
                    <li role="none"><a role="menuitem" href="/de/home/index.html">Deutsch</a></li>
                    <li role="none"><a role="menuitem" href="/en/home/index.html">English</a></li>
                    <li role="none"><a role="menuitem" href="/es/home/index.html">Español</a></li>
                    <li role="none"><a role="menuitem" href="/fr/home/index.html">Français</a></li>
                    <li role="none"><a role="menuitem" href="/it/home/index.html">Italiano</a></li>
                    <li role="none"><a role="menuitem" href="/pt/home/index.html">Português</a></li>
                    <li role="none"><a role="menuitem" href="/ja/home/index.html">日本語</a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header>

<section id="one-episode"
         itemscope itemtype="https://schema.org/PodcastEpisode">
  <meta itemprop="mainEntityOfPage" content=""/>
  <header>
    <h1 id="episode-title" itemprop="name">
      #98 <span>La aparición de la Red Global de Datos</span>
    </h1>
    <time datetime="2022-08-04T00:00:00.000Z"
          itemprop="datePublished">
      2022-08-04T00:00:00.000Z
    </time>
    <meta itemprop="episodeNumber" content="98"/>
  </header>

  <!-- VideoObject -->
  <div class="video-container" itemprop="associatedMedia"
       itemscope itemtype="https://schema.org/VideoObject">
    <meta itemprop="name" content="La aparición de la Red Global de Datos">
    <meta itemprop="embedUrl"
          content="https://www.youtube.com/embed/url">
    <iframe width="auto" height="auto"
            src="https://www.youtube.com/embed/url?autoplay=1"
            title="La aparición de la Red Global de Datos Video"></iframe>
  </div>

  <!-- AudioObject -->
  <aside class="podcast-container" itemprop="associatedMedia"
         itemscope itemtype="https://schema.org/AudioObject">
    <meta itemprop="name" content="La aparición de la Red Global de Datos">
    <meta itemprop="contentUrl"
          content="https://share.transistor.fm/e/140001aa">
    <iframe width="100%" height="180" frameborder="0" scrolling="no"
            src="https://share.transistor.fm/e/140001aa"
            title="La aparición de la Red Global de Datos Audio"></iframe>
  </aside>

  <div class="show-summary" itemprop="description">
    <p><p>En este episodio, Darren rememora con Chetan Venkatesh, CEO de MacroMeta. Venkatesh tiene una larga trayectoria en gestión de datos desde los primeros días de la Computación en Red y ha fundado MacroMeta para abordar la gestión de datos en los bordes dispersos globalmente, centros de datos y nubes.</p>
</p>
    <nav class="tags" aria-label="Tags">
      
        <a href="../../../es/search.html?query=moderncomputing"
           itemprop="keywords">moderncomputing</a>
      
        <a href="../../../es/search.html?query=edgecomputing"
           itemprop="keywords">edgecomputing</a>
      
        <a href="../../../es/search.html?query=dataprivacy"
           itemprop="keywords">dataprivacy</a>
      
        <a href="../../../es/search.html?query=multicloud"
           itemprop="keywords">multicloud</a>
      
        <a href="../../../es/search.html?query=zerotrust"
           itemprop="keywords">zerotrust</a>
      
        <a href="../../../es/search.html?query=cybersecurity"
           itemprop="keywords">cybersecurity</a>
      
        <a href="../../../es/search.html?query=technology"
           itemprop="keywords">technology</a>
      
        <a href="../../../es/search.html?query=process"
           itemprop="keywords">process</a>
      
    </nav>
    <div class="guests" itemprop="actor" itemscope itemtype="https://schema.org/Person">
      
        <a href="../../../es/guests/darren-w-pulsipher/index.html"
           itemprop="name" target="_blank">Darren W Pulsipher</a>
      
        <a href="../../../es/guests/chetan-venkatesh/index.html"
           itemprop="name" target="_blank">Chetan Venkatesh</a>
      
    </div>
  </div>

  <div class="show-notes" itemprop="transcript">
    <p>Chetan es un ingeniero convertido en especialista en operaciones y startups (Macrometa es su cuarta startup). Él dice que ha estado trabajando en el mismo problema de tratar con datos distribuidos y reducir la latencia durante veinte años.</p>
<p>Los datos ya no están solo en un centro de datos, sino en todas partes: en la nube, en la periferia y en los portátiles de las personas. Gestionar todo eso de manera efectiva es un desafío.</p>
<p>Hace aproximadamente diez años, Marc Andreessen dijo que el software está devorando el mundo. En este punto, el software se ha comido todo y ha convertido toda clase de limitaciones y barreras en oportunidades. La computación en múltiples hilos es una de las barreras que ha caído con la nube. Se pueden construir aplicaciones que se ejecuten simultáneamente en diferentes partes del mundo. Paralelamente, se está produciendo un movimiento de desarrolladores para hacer todo tan simple como debe ser para la persona promedio en ciencias de la computación. Así que por un lado tenemos una sofisticada evolución tecnológica y por otro lado, un movimiento hacia la simplicidad.</p>
<p>Arquitecturas como Jamstack permiten que la computación distribuida ocurra a gran escala con una gran simplicidad, pero todavía hay una vasta frontera por descubrir y conquistar. La oportunidad de una expansión extendida ahora está en el borde. La gestión de datos distribuidos y el borde son dos caras de la misma moneda.</p>
<p>Un gran problema es que algunos desarrollos de software se están moviendo hacia la funcionalidad como un servicio que ignora los datos. Además, existe la percepción de que los datos son ubicuos, pero gran parte de los dispositivos periféricos no siempre están conectados. No hay garantía de que una aplicación tenga acceso a todos los datos. Las redes ya no están centralizadas; la noción de microservicios sin estado surgió de la movida hacia la nube. Esta falta de estado puede convertirse en una barrera enorme. Por eso, arquitecturas como Jamstack y funciones sin servidor tratan los datos como un tema periférico en lugar de un problema central.</p>
<p>Las estructuras de datos sin estado son simples. Tienes un lugar específico donde guardas tus datos, y luego vuelves a un estado sin estado. Las estructuras de datos con estado requieren infraestructuras robustas con estructuras de datos más complejas porque soportan la aplicación a medida que emite constantemente su estado. A medida que nos adentramos en un mundo de datos de transmisión en tiempo real en el que el estado se emite constantemente desde algún lugar del ecosistema, la infraestructura se vuelve compleja y difícil de gestionar porque no están diseñadas arquitectónicamente. Ahí es donde entra Macrometa. Han construido una nueva plataforma para este estado activo continuo en tiempo real a escala de exabytes.</p>
<p>Lidiar con estos datos en tiempo real y en un estado activo y dinámico es un cambio significativo para muchos desarrolladores de software. Desde que surgieron las primeras infraestructuras en la nube, luego las plataformas de big data y después los datos como servicio, la industria se ha vuelto eficiente en la ingestión, procesamiento y análisis de datos históricos. Pero ahora estamos en un mundo donde los datos existen en un espectro en lugar de como un monolito. Una cualidad apreciada ahora es que los datos tienen una visión y valor perecederos. Algunos datos tienen una vida útil breve. Las escalas de tiempo actuales son demasiado grandes para utilizar los datos eficientemente; necesitamos sistemas que se comuniquen de manera eficiente en 50 milisegundos y reduzcan la carga cognitiva de las personas que interactúan con esos sistemas.</p>
<p>La mayoría de las personas malinterpretan la latencia: no es algo que te brinde alegría, sino que la falta de ella te molesta. Por ejemplo, ¿cuánto tiempo tolerará alguien un video entrecortado de YouTube o un programa de Netflix que se carga lentamente? Cincuenta milisegundos para una máquina es una eternidad. Una máquina puede hacer una cantidad enorme de cosas en 50 milisegundos, por lo que la latencia se vuelve esencial, especialmente al considerar el valor perecedero de los datos.</p>
<p>Otro problema ahora es que, debido a la nube, la interconectividad y el sistema global, las startups son empresas multinacionales y los datos se vuelven sensibles a la ubicación. Algunos de los datos están regulados, algunos son PII y no pueden ser extraídos en ciertas jurisdicciones, etc. Un excelente ejemplo de este problema es cómo los europeos no quieren que sus datos salgan de sus fronteras, pero la mayor parte de la infraestructura de la nube y las aplicaciones están construidas aquí en Estados Unidos.</p>
<p>Un tercer problema es que los datos se encuentran en muchos lugares; existen límites entre sistemas, tanto físicos como lógicos. Los datos pueden ser esencialmente estáticos y rígidos, por lo que necesitamos infraestructura que permita que los datos se conecten y fluyan en tiempo real con consistencia y garantías de ordenamiento. Lo más importante es que crea fungibilidad para poder ser consumidos rápidamente de diversas formas.</p>
<p>Un problema adicional es que los datos tienen mucho ruido, y no tiene sentido enviar distancias intercontinentales, pagando tarifas de transferencia, solo para acabar eliminando la mayor parte. Los datos pierden valor en el momento en que llegan a su destino. También existe una alta tasa de actualización, por lo que los sistemas a menudo trabajan con datos obsoletos.</p>
<p>Necesitamos nuevas formas de resolver este tipo de problemas de datos distribuidos. Chetan cree que los próximos diez años pertenecerán a esta área de las ciencias de datos.</p>
<p>La primera generación de soluciones de datos distribuidos utilizaba la transformación operativa. Google Docs es un excelente ejemplo de eso. Sin embargo, la transformación operativa requiere centralización del control, por lo que no escala bien. Google ha encontrado una manera de escalar, pero eso no se generaliza al desarrollador promedio. Solo hay tal vez cinco compañías en el mundo que lo entienden a esa escala, y gran parte de ese conocimiento está cerrado en esas compañías y tecnología propietaria.</p>
<p>Macrometa está trabajando con la comunidad y la academia para intentar crear un nuevo cuerpo de conocimiento, mucho más eficiente que estos modelos centralizados de forma totalmente distribuida.</p>
<p>Actualmente, existen infraestructuras disponibles que son excelentes para resolver problemas históricos de tipo registro. Están tratando de avanzar hacia datos en tiempo real, pero sus arquitecturas no están diseñadas fundamentalmente para ello. Estos nuevos problemas con datos sensibles al tiempo y la ubicación, valor de actuación, tasas de actualización, gravedad de datos y ruido de datos requieren una nueva forma, una nueva infraestructura. Chetan lo llama un sistema de interacción en lugar de un sistema de registros, porque los sistemas de interacción son redes de datos, cerca de donde se origina y se consume datos, que luego filtran y enriquecen todo y lo dirigen a sus destinatarios previstos. Es una función de redes.</p>
<p>Macrometa ha construido procesadores de red que están moviendo los datos alrededor - una red global de datos. Es un sistema de API sin servidor donde los desarrolladores simplemente consumen API para resolver problemas de datos activos y operativos en tiempo real. Macrometa es una red global de datos en la topología de un CDM, pero con una plataforma de datos como Snowflake que produce primitivas de datos ricas para manejar valores de datos activos y operativos en tiempo real.</p>
<p>Puedes integrar herramientas analíticas en la red de datos global y desplegar el análisis cerca de donde se genera o se requiere los datos. Así como Amazon cambió fundamentalmente la distribución minorista con arquitectura y algoritmos periféricos para mantener los almacenes locales óptimamente abastecidos para los envíos nocturnos, Macrometa ha hecho lo mismo para los datos. Están acercando los datos y la computación a esos datos mucho más cerca y permitiendo que suceda en milisegundos. Esta capacidad de crear bucles de información en tiempo real es un habilitador poderoso. Por ejemplo, los pequeños minoristas pueden utilizar el inventario local de su tienda en su comercio electrónico sin sobreabastecerse para competir con Amazon.</p>
<p>Un gran caso de uso para la plataforma Macrometa es en ciberseguridad. Algunos clientes están eliminando sus modelos de datos centralizados para aprovechar la menor latencia y poder bloquear amenazas en tiempo real.</p>
<p>La red global de datos es una capa de transformación entre tus fuentes y receptores de datos con los consumidores y publicadores. Está compuesta por tres elementos tecnológicos. El primero es el entramado global de datos, que es la capa de integración para los datos. El segundo es una infraestructura global de cómputo que te permite orquestar datos y lógica empresarial en forma de funciones y contenedores a nivel mundial. El tercer elemento es un entramado global de privacidad: cómo proteger los datos y cumplir con diferentes regímenes y regulaciones que afectan si tus datos se están transmitiendo o almacenando.</p>
<p>La malla global de datos es una forma de integrar rápidamente y fácilmente datos de diferentes sistemas a través de límites, ya sean físicos o lógicos. Todo esto se incorpora y fluye con consistencia y garantías de orden. El valor más significativo de esta malla es que hace que los datos sean fungibles y consumibles al permitirte poner APIs en los datos rápidamente. Esto se puede hacer en unas pocas horas en comparación con lo que usualmente toma meses. La red global de datos está diseñada para billones de eventos por segundo, de modo que puede mover datos a escala masiva a un costo un 90 por ciento menor que la nube.</p>
<p>La tela global de cómputo lleva la lógica empresarial y la orquestación para acercar su procesamiento a donde sus datos se originan o se consumen. Este es el patrón anti-nube. Macrometa moverá quirúrgica y dinámicamente aquellos microservicios que necesiten cumplir con regulaciones de datos, por ejemplo, a los lugares correctos para su ejecución.</p>
<p>La última pieza es la protección de datos. Este es un problema complejo y las respuestas que tenemos hoy en día, por ejemplo, abrir un silo separado para esa geolocalización en particular para cumplir con los requisitos cada vez que inicia una instancia en su aplicación, no son buenas. La plataforma de Macrometa tiene una red de datos que ya está integrando y haciendo que sus datos fluyan a través de todos los límites, junto con funciones de cálculo y la ingestión de datos sin limitaciones. Ahora, puede crear límites lógicos y anclar datos a regiones específicas para protegerlos. Pueden establecer afinidades y políticas sobre cómo los datos viven y se replican en una región, como si deberían ser anonimizados cuando se copian fuera de la región.</p>
<p>La tecnología de Macrometa permite casos de uso que son imposibles de realizar en la nube porque las nubes están demasiado lejos o son demasiado lentas. Macrometa ha construido la infraestructura para resolver problemas de datos en tiempo real y convertirlos en oportunidades en lugar de desafíos. Para obtener más información sobre Macrometa, visita macrometa.com.</p>

  </div>

  <div class="sponsor-container">
    <p>Thank you to our sponsors for supporting this episode!</p>
    <ol>
      
    </ol>
  </div>
</section>

<!-- PodcastEpisode JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "PodcastEpisode",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": ""
  },
  "name": "La aparición de la Red Global de Datos",
  "episodeNumber": "98",
  "datePublished": "2022-08-04T00:00:00.000Z",
  "description": "<p>En este episodio, Darren rememora con Chetan Venkatesh, CEO de MacroMeta. Venkatesh tiene una larga trayectoria en gestión de datos desde los primeros días de la Computación en Red y ha fundado MacroMeta para abordar la gestión de datos en los bordes dispersos globalmente, centros de datos y nubes.</p>
",
  "associatedMedia": [
    {
      "@type": "VideoObject",
      "name": "La aparición de la Red Global de Datos Video",
      "embedUrl": "https://www.youtube.com/embed/url"
    },
    {
      "@type": "AudioObject",
      "name": "La aparición de la Red Global de Datos Audio",
      "contentUrl": "https://share.transistor.fm/e/140001aa"
    }
  ],
  "actor": [
    
    {
      "@type": "Person",
      "name": "Darren W Pulsipher"
    }
    
    {
      "@type": "Person",
      "name": "Chetan Venkatesh"
    }
    
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Embracing Digital Transformation",
    "logo": {
      "@type": "ImageObject",
      "url": "https://embracingdigital.org/images/logo.png"
    }
  }
}
</script>
<footer id="footer">
    <div class="footer-content">
        <p>Copyright &copy; 2025 Paidar Productions LLC</p>
        <p>Todos los derechos reservados</p>
    </div>
</footer>
<script>
    // year
    (function(){ var y=document.getElementById('y'); if(y){ y.textContent = new Date().getFullYear(); } })();

    // Guard for pages without nav
    const toggle = document.querySelector('.menu-toggle');
    const nav    = document.querySelector('nav#primary-nav');
    if (nav) {
        // Mobile: toggle .menu-open on <body>
        toggle?.addEventListener('click', () => {
            const open = document.body.classList.toggle('menu-open');
            toggle.setAttribute('aria-expanded', String(open));
        });

        // Dropdowns: tap/click + keyboard
        document.querySelectorAll('li.dropdown > a').forEach(link => {
            const li = link.parentElement;
            const submenu = li.querySelector('.dropdown-menu');

            link.addEventListener('click', (e) => {
                if (!submenu) return;
                e.preventDefault();

                // close others
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    if (a !== link) {
                        a.setAttribute('aria-expanded', 'false');
                        a.parentElement.classList.remove('open');
                    }
                });

                const isOpen = li.classList.toggle('open');
                link.setAttribute('aria-expanded', String(isOpen));
            });

            link.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowDown') { e.preventDefault(); submenu?.querySelector('a')?.focus(); }
                if (e.key === 'Escape')    { li.classList.remove('open'); link.setAttribute('aria-expanded','false'); link.focus(); }
            });
        });

        // Close dropdowns on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('nav')) {
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    a.setAttribute('aria-expanded','false');
                    a.parentElement.classList.remove('open');
                });
            }
        });
    }
</script>

