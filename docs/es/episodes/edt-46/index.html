<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Título de página dinámico -->
    <title>Asegurando tu canal de DevOps | Embracing Digital Transformation</title>

    <!-- SEO -->
    <link rel="canonical" href="https://www.embracingdigital.org/es/episodes/edt-46/index.html">
    <meta name="description" content="En la segunda parte de este episodio, Darren Pulsipher, Arquitecto Jefe de Soluciones de Intel, brinda consejos prácticos para asegurar cada etapa del pipeline de DevOps, incluyendo la protección del hardware y las pilas de software con la raíz de confianza hardware, el escaneo de seguridad, los con">
    <meta name="keywords" content="Transformación Digital, pódcast, entrevistas, noticias, IA, ciberseguridad, edge computing, gestión de datos">
    <meta name="author" content="Dr. Darren W. Pulsipher">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Asegurando tu canal de DevOps | Embracing Digital Transformation — Entrevistas, Noticias y Comunidad">
    <meta property="og:description" content="En la segunda parte de este episodio, Darren Pulsipher, Arquitecto Jefe de Soluciones de Intel, brinda consejos prácticos para asegurar cada etapa del pipeline de DevOps, incluyendo la protección del hardware y las pilas de software con la raíz de confianza hardware, el escaneo de seguridad, los con">
    <meta property="og:url" content="https://www.embracingdigital.org/es/episodes/edt-46/index.html">
    <meta property="og:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Asegurando tu canal de DevOps | Embracing Digital Transformation — Entrevistas, Noticias y Comunidad">
    <meta name="twitter:description" content="En la segunda parte de este episodio, Darren Pulsipher, Arquitecto Jefe de Soluciones de Intel, brinda consejos prácticos para asegurar cada etapa del pipeline de DevOps, incluyendo la protección del hardware y las pilas de software con la raíz de confianza hardware, el escaneo de seguridad, los con">
    <meta name="twitter:image" content="https://embracingdigital.org/images/logo.png">

    <!-- Hreflang (alternativas) -->
    <link rel="alternate" href="https://embracingdigital.org/es/home/" hreflang="es">
    <link rel="alternate" href="https://embracingdigital.org/de/home/" hreflang="de">
    <link rel="alternate" href="https://embracingdigital.org/fr/home/" hreflang="fr">
    <link rel="alternate" href="https://embracingdigital.org/it/home/" hreflang="it">
    <link rel="alternate" href="https://embracingdigital.org/pt/home/" hreflang="pt">
    <link rel="alternate" href="https://embracingdigital.org/ar/home/" hreflang="ar">
    <link rel="alternate" href="https://embracingdigital.org/ja/home/" hreflang="ja">
    <link rel="alternate" href="https://embracingdigital.org/es/home/" hreflang="x-default">

    <!-- Favicon y estilos -->
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/styles.css">

    <!-- Analítica -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P4XHVE79DL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P4XHVE79DL');
    </script>

    <!-- Schema.org: Organization + WebSite -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Abrazando la Transformación Digital",
            "url": "https://embracingdigital.org/",
            "logo": "https://embracingdigital.org/images/logo.png",
            "sameAs": [
                "https://www.youtube.com/@embracingdigital",
                "https://www.linkedin.com/company/embracing-digital-transformation"
            ]
        }
    </script>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Abrazando la Transformación Digital",
            "url": "https://embracingdigital.org/",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://embracingdigital.org/es/search.html?query={query}",
                "query-input": "required name=query"
            }
        }
    </script>
</head>
<body>

<header role="banner">
    <!-- Logo -->
    <div class="logo-container">
        <a href="/es/home/" aria-label="Inicio — Abrazando la Transformación Digital">
            <img src="/images/logo.png" alt="Logo — Abrazando la Transformación Digital" class="site-icon">
        </a>
    </div>

    <!-- Botón móvil -->
    <button class="menu-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Alternar menú">☰</button>

    <!-- Navegación principal -->
    <nav id="primary-nav" aria-label="Principal">
        <ul>
            <li><a href="/es/home/index.html" >Inicio</a></li>

            <li class="dropdown">
                <a href="/es/shows/index.html" aria-haspopup="true" aria-expanded="false">Programas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none">
                        <a role="menuitem" href="/es/episodes/index.html" aria-label="Entrevistas — Abrazando la Transformación Digital">
                            Abrazando la Transformación Digital
                            <small class="nav-note">Entrevistas</small>
                        </a>
                    </li>
                    <li role="none">
                        <a role="menuitem" href="/es/briefs/index.html" aria-label="Noticias — Digital esta semana">
                            Digital esta semana
                            <small class="nav-note">Noticias</small>
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="/es/guests/index.html">Invitados</a></li>
            <li><a href="/es/articles/index.html">Artículos</a></li>

            <!-- Comunidad -->
            <li class="dropdown">
                <a href="/es/community.html" aria-haspopup="true" aria-expanded="false">Comunidad</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/es/newsletter.html">Boletín</a></li>
                    <li role="none"><a role="menuitem" href="https://www.patreon.com/embracingdigital" target="_blank" rel="noopener">Patreon</a></li>
                    <li role="none"><a role="menuitem" href="https://www.linkedin.com/company/embracing-digital-transformation" target="_blank" rel="noopener">Grupo de LinkedIn</a></li>
                </ul>
            </li>

            <li><a href="https://6704f0-2.myshopify.com/" target="_blank" rel="noopener">Tienda</a></li>

            <!-- Acerca de -->
            <li class="dropdown">
                <a href="/es/about.html" aria-haspopup="true" aria-expanded="false">Acerca de</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/es/about.html">Sobre el programa</a></li>
                    <li role="none"><a role="menuitem" href="/es/host.html">Anfitrión: Dr. Darren Pulsipher</a></li>
                    <li role="none"><a role="menuitem" href="/es/sponsors/index.html">Patrocinios y contacto</a></li>
                </ul>
            </li>

            <li><a href="/es/search.html">Buscar</a></li>

            <!-- Idiomas -->
            <li class="dropdown">
                <a href="#" aria-haspopup="true" aria-expanded="false">Idiomas</a>
                <ul class="dropdown-menu" role="menu">
                    <li role="none"><a role="menuitem" href="/ar/home/index.html">العربية</a></li>
                    <li role="none"><a role="menuitem" href="/de/home/index.html">Deutsch</a></li>
                    <li role="none"><a role="menuitem" href="/en/home/index.html">English</a></li>
                    <li role="none"><a role="menuitem" href="/es/home/index.html">Español</a></li>
                    <li role="none"><a role="menuitem" href="/fr/home/index.html">Français</a></li>
                    <li role="none"><a role="menuitem" href="/it/home/index.html">Italiano</a></li>
                    <li role="none"><a role="menuitem" href="/pt/home/index.html">Português</a></li>
                    <li role="none"><a role="menuitem" href="/ja/home/index.html">日本語</a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header>



<a class="skip-link" href="#main">Skip to content</a>

<nav class="breadcrumbs" aria-label="Breadcrumb">
    <ol>
        <li><a href="../../../es/home/index.html">Home</a></li>
        <li><a href="../../../es/episodes/index.html">Episodes</a></li>
        <li aria-current="page">Episode 46: Securing your DevOps Pipeline</li>
    </ol>
</nav>

<main id="main" role="main">
    <article class="episode-container" itemscope itemtype="https://schema.org/PodcastEpisode">

        <header id="one-episode">
            
                <link itemprop="url" href="https://www.embracingdigital.org/es/episodes/edt-46/index.html">
                <meta itemprop="mainEntityOfPage" content="https://www.embracingdigital.org/es/episodes/edt-46/index.html"/>
            

            <h1 id="episode-title" itemprop="name">
                <span class="episode-number">Episode 46</span>
                <span class="episode-title">Securing your DevOps Pipeline</span>
            </h1>

            <p class="episode-meta">
                
                    <time datetime="2021-04-08" itemprop="datePublished">2021-04-08T00:00:00.000Z</time>
                
                <span itemprop="author" itemscope itemtype="https://schema.org/Person">
          <meta itemprop="name" content="Dr. Darren Pulsipher">
          Hosted by <span class="host-name">Dr. Darren Pulsipher</span>
        </span>
            </p>

            <meta itemprop="episodeNumber" content="46"/>
            <meta itemprop="inLanguage" content="es"/>
        </header>

        
            <section class="video-container" aria-label="Watch the episode"
                     itemprop="associatedMedia" itemscope itemtype="https://schema.org/VideoObject">
                <meta itemprop="name" content="Asegurando tu canal de DevOps Video">
                <meta itemprop="embedUrl" content="https://www.youtube.com/embed/url">
                <iframe
                        width="auto"
                        height="auto"
                        src="https://www.youtube.com/embed/url"
                        title="Asegurando tu canal de DevOps Video"
                        loading="lazy"
                        referrerpolicy="strict-origin-when-cross-origin"
                        allowfullscreen
                ></iframe>
            </section>
        

        
            <section class="podcast-container" aria-label="Listen to this episode"
                     itemprop="associatedMedia" itemscope itemtype="https://schema.org/AudioObject">
                <meta itemprop="name" content="Asegurando tu canal de DevOps Audio">
                <meta itemprop="contentUrl" content="https://share.transistor.fm/e/3abb647c">
                <iframe
                        width="100%"
                        height="180"
                        frameborder="0"
                        scrolling="no"
                        src="https://share.transistor.fm/e/3abb647c"
                        title="Asegurando tu canal de DevOps Audio"
                        loading="lazy"
                ></iframe>

                <p class="listen-note">
                    Explore more in the <a href="../../../es/episodes/index.html">episode archive</a>.
                </p>
            </section>
        

        <section class="show-summary" aria-label="Episode summary" itemprop="description">
            <h2>Summary</h2>
            <p>En la segunda parte de este episodio, Darren Pulsipher, Arquitecto Jefe de Soluciones de Intel, brinda consejos prácticos para asegurar cada etapa del pipeline de DevOps, incluyendo la protección del hardware y las pilas de software con la raíz de confianza hardware, el escaneo de seguridad, los con</p>


            
                <nav class="tags" aria-label="Tags">
                    
                        <a href="../../../es/search.html?query=security"
                           itemprop="keywords">security</a>
                    
                        <a href="../../../es/search.html?query=devops"
                           itemprop="keywords">devops</a>
                    
                        <a href="../../../es/search.html?query=hardware_security"
                           itemprop="keywords">hardware_security</a>
                    
                        <a href="../../../es/search.html?query=zerotrust"
                           itemprop="keywords">zerotrust</a>
                    
                        <a href="../../../es/search.html?query=cybersecurity"
                           itemprop="keywords">cybersecurity</a>
                    
                        <a href="../../../es/search.html?query=people"
                           itemprop="keywords">people</a>
                    
                        <a href="../../../es/search.html?query=process"
                           itemprop="keywords">process</a>
                    
                        <a href="../../../es/search.html?query=policy"
                           itemprop="keywords">policy</a>
                    
                        <a href="../../../es/search.html?query=technology"
                           itemprop="keywords">technology</a>
                    
                </nav>
            

            
                <div class="guests" aria-label="Guests">
                    
                        <span itemprop="actor" itemscope itemtype="https://schema.org/Person">
              <a href="../../../es/guests/darren-w-pulsipher/index.html" itemprop="url">
                <span itemprop="name">Darren W Pulsipher</span>
              </a>
            </span>
                    
                </div>
            
        </section>

        <section class="show-notes" aria-label="Show notes">
            <h2>Los vectores de ataque</h2>
<p>Muchos ataques ocurren a nivel de las personas. Algunos de los ataques más recientes y insidiosos se han centrado en el phishing y la ingeniería social en individuos dentro de DevOps. Necesitamos entrenar a las personas mejor en todos los niveles. En un caso, fue un pasante con acceso a las llaves quien cayó en un plan nefasto.</p>
<p>Otro vector es la tecnología: ataques de denegación de servicio tradicionales, ataques de inyección SQL o ataques de desbordamiento de búfer. Los incidentes más recientes utilizan tanto a las personas como a la tecnología para atacar el proceso. Son insidiosos porque ocurren alrededor del proceso de construcción y pueden ser muy difíciles de encontrar. También pueden propagar código malicioso a través de tus clientes. Para infundir confianza en los clientes, las organizaciones deben tener una estrategia para asegurar la cadena de suministro.</p>
<h2>Seguridad del oleoducto</h2>
<p>No todas las tuberías de construcción son iguales, pero en general, constan de cuatro etapas con entornos: desarrollo, construcción, prueba y producción. Estas etapas se pueden desglosar fácilmente en múltiples etapas dependiendo del tipo de producto que estés desarrollando, pero los entornos se vinculan a esas diferentes etapas.</p>
<p>Necesitamos analizar todo el proceso, que incluye software, hardware y procesos, y tomar un enfoque diferente en lugar de solo enfocarnos en infraestructura, como lo han hecho la mayoría de manera efectiva.</p>
<h2>Seguridad del anfitrión y la infraestructura</h2>
<p>En la parte inferior de la pila, necesitas asegurar el hardware en el entorno de desarrollo y construcción. El entorno de pruebas será un poco diferente porque es posible que desees ejecutar pruebas que involucren la inyección de código malicioso. Los entornos de producción suelen estar bien protegidos, especialmente ahora que más empresas ofrecen software como servicio. En los entornos de producción y construcción, debes llevar a cabo todas las medidas de seguridad típicas que harías en entornos de producción o SaaS.</p>
<p>Hay tres elementos clave en estos entornos. El primero es la detección. La detección y corrección es una medida de seguridad bien conocida que utiliza registros de servicio que utilizan una plataforma como Splunk para encontrar cualquier cosa fuera de lo común. Asegúrate de hacer esto no solo en entornos de desarrollo, sino también en construcción y producción.</p>
<p>Ten en cuenta que en el entorno de prueba, necesitarás múltiples entornos de prueba, algunos más seguros que otros en el lado de la detección, ya que deseas inyectar código erróneo en tus pruebas. No apliques la misma seguridad en todos los entornos; los perfiles de seguridad pueden ser diferentes para cada entorno.</p>
<p>La prevención es la segunda clave. Esto significa ser inteligente con el hardware, asegurarse de que las cosas estén correctamente actualizadas, tener las actualizaciones adecuadas de seguridad y hacerlo de manera automatizada. Esto debería ocurrir en todos los entornos, incluyendo el entorno de pruebas, y especialmente en el desarrollo y en producción.</p>
<p>La tercera clave es parte de la prevención: el hardware de raíz confiable. Se puede establecer una cadena de confianza desde el hardware, a través de las secciones de inicio del firmware, hasta los hipervisores y sistemas operativos. La raíz de confianza se puede llevar a los entornos de desarrollo, construcción, prueba y producción. Esto puede incluir contenedores seguros y máquinas virtuales seguras. Por ejemplo, me gusta almacenar mis claves de encriptación y hash en hardware como un módulo TPM y luego también con la extensión Secure Guard de Intel. Incluso si alguien ingresara a la máquina, no podrían robar esas claves.</p>
<h2>Ejecutables de confianza</h2>
<p>Configurar ejecutables confiables es el siguiente paso. Esto significa que puedes ejecutar verificaciones de seguridad contra el código que se comprueba y se compila, y luego hacer check-in del hash con esos cambios. Si se ha inyectado algo en la base de código, puedes detectarlo, ya que no debería haber cambios en el código durante el proceso de compilación.</p>
<p>En una nueva etapa de controles de seguridad, puedes ejecutar análisis estático en el código o análisis dinámico en el código o violaciones de seguridad. Hay algunas herramientas excelentes que puedes integrar fácilmente en tu tubería típica de DevOps, ya sea que estés utilizando Jenkins o flujos de trabajo de GitHub, por ejemplo.</p>
<p>Una vez que se ha generado un ejecutable, se debe crear inmediatamente el hash y ese hash debe ser versionado junto con el ejecutable; debe permanecer el ejecutable que pasa por todas las pruebas y se implementa en producción. Ese hash garantizará que nada ha sido manipulado.</p>
<h2>Imágenes atestadas y seguras</h2>
<p>Normalmente, hay varios repositorios o ejecutables disponibles para usar en el código. El hash que se crea durante la compilación ahora se encuentra en el registro, y puedes certificarlos. Puedes asegurarte de que no se modifiquen al guardarlos en las imágenes. Si alguien necesita volver atrás y hacer un pequeño cambio, por ejemplo, una etiqueta o metadatos, es importante no realizar el cambio y asignarle el mismo número de versión. Es mejor pasar por el ciclo nuevamente, incluso si lleva más tiempo que realizar procesos manuales con tus binarios.</p>
<p>Ahora, puedes tomar ese mismo archivo binario en el que has ejecutado todas las pruebas y enviarlo a producción. En este punto, sería un error reconstruir el código fuente. Lo mejor es enviar la compilación original al repositorio de producción, también conocido como el repositorio &quot;golden&quot;. Este repositorio es el único lugar desde donde deben obtenerse imágenes, binarios o máquinas virtuales, por ejemplo. Todas las imágenes deben ser notarizadas y confirmadas. Si tienes máquinas virtuales o aplicaciones confidenciales, o si deseas asegurarte de que se ejecuten solo en hardware específico, puedes aplicar ese tipo de restricciones. Puedes encriptar las máquinas virtuales, contenedores o incluso los binarios y bloquearlos con la llave que se encuentra almacenada en tus sistemas de compilación y producción.</p>
<h2>Inyectando herramientas de seguridad</h2>
<p>Las herramientas de seguridad deben ser integradas en el proceso de construcción. En lugar de usar librerías de seguridad de código abierto o recrear las que ya existen, sus ingenieros de seguridad deben estar involucrados para que puedan elegir herramientas que puedan ser fácilmente utilizadas y reutilizadas por los equipos de desarrollo. Un buen ejemplo es la autenticación básica: inicio de sesión de usuario. Debería haber una librería común en lugar de que cada aplicación tenga la suya propia.</p>
<p>Es importante tratar estas bibliotecas y herramientas de seguridad de la misma manera que tratarías cualquier otro programa de desarrollo de software que compartas en toda tu organización. Compartirlos reducirá el tiempo y aumentará la seguridad en todo tu ecosistema.</p>
<h2>Construye una vez, despliega seguridad en todas partes.</h2>
<p>Una vez que hayas establecido tus equipos de seguridad de desarrollo, asegúrate de inyectar las políticas y herramientas en todos tus productos y entornos. Existe una gran tecnología hoy en día que te permite gestionar múltiples entornos. Entonces, cuando se crea una nueva aplicación, se crea en un perfil de seguridad con tus propias imágenes de VM o contenedores como imágenes base que están utilizando los equipos de desarrollo. Al configurar la seguridad en tus VM o contenedores en tus imágenes base, obtienes una conformidad de seguridad instantánea en los diferentes entornos. También existe la posibilidad de integrarse con herramientas de seguridad, para que si encuentras algo inusual en la aplicación, puedas notificar a las herramientas de seguridad. No intentes crear herramientas de seguridad que cubran el cien por ciento de los casos, porque nunca las terminarás; apunta al ochenta por ciento como una base sólida y crea herramientas para que los desarrolladores de aplicaciones puedan innovar en el último veinte por ciento si es necesario, en conjunto con tu equipo de seguridad.</p>
<p>Un último consejo importante es automatizar todo lo que puedas, especialmente en el pipeline de DevOps para prevenir inyecciones maliciosas. Protege tu pipeline; protege tu proceso.</p>

        </section>

        

    </article>
</main>

<!-- Structured Data -->
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "PodcastSeries",
  "@id": "https://www.embracingdigital.org/es/episodes/index.html#series",
  "name": "Embracing Digital Transformation",
  "url": "https://www.embracingdigital.org/es/episodes/index.html",
  "inLanguage": "es",
  "description": "A podcast about the digital transformation of the world.",
  "publisher": {
    "@type": "Organization",
    "@id": "https://www.embracingdigital.org/#org",
    "name": "Embracing Digital Transformation",
    "url": "https://www.embracingdigital.org",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.embracingdigital.org/images/logo.png",
      "width": 512,
      "height": 512
    }
  }
}</script>
<script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "PodcastEpisode",
  "@id": "https://www.embracingdigital.org/es/episodes/edt-46/index.html#episode",
  "url": "https://www.embracingdigital.org/es/episodes/edt-46/index.html",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.embracingdigital.org/es/episodes/edt-46/index.html"
  },
  "name": "Asegurando tu canal de DevOps",
  "episodeNumber": 46,
  "datePublished": "2021-04-08",
  "inLanguage": "es",
  "description": "En la segunda parte de este episodio, Darren Pulsipher, Arquitecto Jefe de Soluciones de Intel, brinda consejos prácticos para asegurar cada etapa del pipeline de DevOps, incluyendo la protección del hardware y las pilas de software con la raíz de confianza hardware, el escaneo de seguridad, los con",
  "partOfSeries": {
    "@id": "https://www.embracingdigital.org/es/episodes/index.html#series"
  },
  "author": {
    "@type": "Person",
    "name": "Dr. Darren Pulsipher"
  },
  "creator": {
    "@type": "Person",
    "name": "Dr. Darren Pulsipher"
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://www.embracingdigital.org/es/episodes/edt-46/thumbnail.png"
  },
  "associatedMedia": [
    {
      "@type": "VideoObject",
      "name": "Asegurando tu canal de DevOps Video",
      "embedUrl": "https://www.youtube.com/embed/url"
    },
    {
      "@type": "AudioObject",
      "name": "Asegurando tu canal de DevOps Audio",
      "contentUrl": "https://share.transistor.fm/e/3abb647c"
    }
  ],
  "actor": [
    {
      "@type": "Person",
      "name": "Darren W Pulsipher",
      "url": "https://www.embracingdigital.org/../../../es/guests/darren-w-pulsipher/index.html"
    }
  ]
}</script>

<footer id="footer">
    <div class="footer-content">
        <p>Copyright &copy; 2025 Paidar Productions LLC</p>
        <p>Todos los derechos reservados</p>
    </div>
</footer>
<script>
    // year
    (function(){ var y=document.getElementById('y'); if(y){ y.textContent = new Date().getFullYear(); } })();

    // Guard for pages without nav
    const toggle = document.querySelector('.menu-toggle');
    const nav    = document.querySelector('nav#primary-nav');
    if (nav) {
        // Mobile: toggle .menu-open on <body>
        toggle?.addEventListener('click', () => {
            const open = document.body.classList.toggle('menu-open');
            toggle.setAttribute('aria-expanded', String(open));
        });

        // Dropdowns: tap/click + keyboard
        document.querySelectorAll('li.dropdown > a').forEach(link => {
            const li = link.parentElement;
            const submenu = li.querySelector('.dropdown-menu');

            link.addEventListener('click', (e) => {
                if (!submenu) return;
                e.preventDefault();

                // close others
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    if (a !== link) {
                        a.setAttribute('aria-expanded', 'false');
                        a.parentElement.classList.remove('open');
                    }
                });

                const isOpen = li.classList.toggle('open');
                link.setAttribute('aria-expanded', String(isOpen));
            });

            link.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowDown') { e.preventDefault(); submenu?.querySelector('a')?.focus(); }
                if (e.key === 'Escape')    { li.classList.remove('open'); link.setAttribute('aria-expanded','false'); link.focus(); }
            });
        });

        // Close dropdowns on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('nav')) {
                document.querySelectorAll('li.dropdown.open > a').forEach(a => {
                    a.setAttribute('aria-expanded','false');
                    a.parentElement.classList.remove('open');
                });
            }
        });
    }
</script>

